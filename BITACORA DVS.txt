BITACORA DVS - 20200720

Objetivos:
1) reemplazar el campo d_subver del DVS por d_flags para controlar el tipo de DVK disponibles para utilizar (IOCTL-IPC)
2) incorporar nombre al DVS
3) Si el IPC esta instalado, el modulo IOCTL utiliza esas funciones del kernel. 
4) Permitir la utilizacion de las dvk_calls directamente desde el kernel
	PROBLEMA QUE VAMOS A ENFRETAR: Como copiar datos desde el kernel de un proceso al modo usuario de otro ?????

COMPILAR EL KERNEL LINUX
=======================

sudo apt-get update
sudo apt-get install git fakeroot build-essential ncurses-dev xz-utils libssl-dev bc
apt-get install linux-headers-686-pae

cp /boot/config-$(uname -r) .config
make menuconfig
sudo make -j 4 && sudo make modules_install -j 4 && sudo make install -j 4
update-initramfs -c -k 4.9.88
update-grub  
update-grub2

  x Symbol: DVKIPC [=n]                                                                                x
  x Type  : boolean                                                                                    x
  x Prompt: Distributed Virtualization Kernel IPC                                                      x
  x   Location:                                                                                        x
  x     -> General setup                                                                               x
  x (1)   -> System V IPC (SYSVIPC [=y])                                                               x
  x Prompt: DVS's DVK embedded in kernel using IPC                                                     x
  x   Location:                                                                                        x
  x (2) -> Processor type and features                                                                 x
  x   Defined at init/Kconfig:254                                                                      x
  x   Depends on: SYSVIPC [=y]                                                                         x
  x                             
  

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
EN EL MAN DE IPC 
       On some architectures—for example x86-64 and ARM—there is no ipc()
       system call !!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

===============================================================================================================
20200720:
    1) reemplazar el campo d_subver del DVS por d_flags para controlar el tipo de DVK disponibles para utilizar (IOCTL-IPC)
	2) incorporar nombre al DVS

MIS_BIT_KTHREAD: indica que el proceso es un Kernel Thread o está haciendo una invocación desde el kernel.

	Se cambio la estructura dvs_usr_t para que contenga el nombre del DVS Cluster y los flags que indica que 
	tipo de interfaces estan disponibles.
	
	Se cambiaron, por ahora, las dos versiones de dvk_hyper.c new_dc_init para que contemple las modificaciones
	Tambien se cambio el dvk_procfs.c de ambas versiones.
	
version IOCTL:
		Initialiting DVS: Enter para continuar... 
		DEBUG 651:dvk_open:106: Open dvk device file /dev/dvk
		ERROR: 651:dvk_open:109: rcode=0
		Initializing DVS. Local node ID 0... 
		DEBUG 651:dvk_dvs_init:542: nodeid=0
		DEBUG 651:dvk_dvs_init:554: ioctl ret=0 errno=0
		DEBUG 651:dvk_dvs_init:559: ioctl ret=0
		d_name=DVS_CLUSTER1 d_nr_dcs=32 d_nr_nodes=32 d_nr_procs=221 d_nr_tasks=35 d_nr_sysprocs=64  <<<< DVS_CLUSTER1
		d_max_copybuf=65536 d_max_copylen=1048576
		d_dbglvl=FFFFFF version=5 flags=0 sizeof(proc)=0
		Get DVS info
		DEBUG 651:dvk_getdvsinfo:248: 
		DEBUG 651:dvk_getdvsinfo:257: ioctl ret=0 errno=0
		DEBUG 651:dvk_getdvsinfo:262: ioctl ret=0
		local node ID 0... 
		d_name=DVS_CLUSTER1 d_nr_dcs=32 d_nr_nodes=32 d_nr_procs=221 d_nr_tasks=35 d_nr_sysprocs=64 
		d_max_copybuf=65536 d_max_copylen=1048576
		d_dbglvl=FFFFFF version=5 flags=2 sizeof(proc)=512 <<<<<<<<<<< flags=2 => BIT_IOCTL
		
		root@node0:/usr/src/dvs/scripts# cd /proc/dvs/
		root@node0:/proc/dvs# ls -l
		total 0
		-r--r--r-- 1 root root 0 jul 20 14:44 info
		-r--r--r-- 1 root root 0 jul 20 14:44 nodes
		dr-xr-xr-x 2 root root 0 jul 20 14:44 proxies
		root@node0:/proc/dvs# more info 
		name=DVS_CLUSTER1 <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
		nodeid=0
		nr_dcs=32
		nr_nodes=32
		max_nr_procs=221
		max_nr_tasks=35
		max_sys_procs=64
		max_copy_buf=65536
		max_copy_len=1048576
		dbglvl=FFFFFF
		version=5 <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< 
		flags=2 <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
		sizeof(proc)=504
		sizeof(proc) aligned=512
		sizeof(dc)=156
		sizeof(node)=92

PARA HOMOGENEIZAR UN UNICO CODIGO 
		Traslade el directorio dvk-mod debajo del /usr/src/linux/ipc 
		De tal modo que el IPC utilice esos objetos creados con el modulo
		
	    AL COMPILAR EL KERNEL 
		root@node0:/usr/src/linux/ipc/dvk-mod# ls -lt *.o
			Estos son los programas que compila el KERNEL 
				-rw-r--r-- 1 root root  218172 jul 20 18:35 dvk_sproxy.o
				-rw-r--r-- 1 root root  181844 jul 20 18:35 dvk_acks.o
				-rw-r--r-- 1 root root  244928 jul 20 18:35 dvk_utils.o
				-rw-r--r-- 1 root root  200500 jul 20 18:35 dvk_procfs.o
				-rw-r--r-- 1 root root  187068 jul 20 18:35 dvk_debugfs.o
				-rw-r--r-- 1 root root  209712 jul 20 18:35 dvk_migrate.o
				-rw-r--r-- 1 root root  427380 jul 20 18:35 dvk_hyper.o
				-rw-r--r-- 1 root root  311872 jul 20 18:35 dvk_ipc.o
				-rw-r--r-- 1 root root  233148 jul 20 18:35 dvk_rproxy.o
			Estos son los programas que compila el MODULO  		
				-rw-r--r-- 1 root root   71484 jul 20 18:29 dvk.mod.o
				-rw-r--r-- 1 root root 2918280 jul 20 18:29 dvk.o
				-rw-r--r-- 1 root root  178824 jul 20 18:28 reljmp_core.o
				-rw-r--r-- 1 root root  207048 jul 20 18:28 dvk_decode.o
				-rw-r--r-- 1 root root  172168 jul 20 18:28 dvk_newcall.o
				-rw-r--r-- 1 root root  197056 jul 20 18:28 main.o
		Asi que en teoria, hay que compilar el kernel con CONFIG_DVKIPC  y automaticamente 
		se compilan algunos programas del directorio del dvk-mod 
		Si solo hay que compilar el MODULO, entonces ejecutar make en el directorio dvk-mod 

===============================================================================================================
20200721:
		Se modifico le main.c de ipc/dvk-mod que verifica si ya existe la estructura dvs en el kernel
		Si existe, entonces se setea dvs_ptr hacia la variable ya existente en el kernel

		Se creo test_dvs_info linkeado con libdvkipc.o para ver si ya el kernel tiene configurado 
		
PROBLEMA: Cuando se quiere cambiar algo del DVK se tiene que recompilar el kernel COMPLETO!! 
	SOLUCION: Proximas versiones compilarsas sin soporte de CONFIG_DVKIPC.
	
			root@node0:/usr/src/dvs/dvk-tests# ./test_dvs_info 
			DEBUG 610:dvk_open:102: 
			Get DVS info
			DEBUG 610:dvk_getdvsinfo:248: 
			DEBUG 610:dvk_getdvsinfo:252: ipc ret=-1
			ERROR: 610:dvk_getdvsinfo:253: rcode=-1
			ERROR: 610:dvk_getdvsinfo:264: rcode=-1
			local node ID -1... 
			d_name=DVS_IPC d_nr_dcs=32 d_nr_nodes=32 d_nr_procs=221 d_nr_tasks=35 d_nr_sysprocs=64  <<<<<<<<<<< nombre DVS_IPC
			d_max_copybuf=65536 d_max_copylen=1048576
			d_dbglvl=7F306 version=5 flags=1 sizeof(proc)=0											<<<<<<<<<<< flags=1 => BIT_IPC			
			root@node0:/usr/src/dvs/dvk-tests# cd ..
			root@node0:/usr/src/dvs# cd ..
			root@node0:/usr/src# cd dvs/scripts/
			root@node0:/usr/src/dvs/scripts# ./rtest.sh t 0
			lcl_nodeid=0
			TCP proxies selected
			./rtest.sh: lÃ­nea 94:   616 Abortado        /usr/local/sbin/spread -c /etc/spread.conf > spread.txt
			dvk                   258048  0
			Initialiting DVS: Enter para continuar... 
			DEBUG 624:dvk_open:102: 
			Initializing DVS. Local node ID 0... 
			DEBUG 624:dvk_dvs_init:542: nodeid=0
			DEBUG 624:dvk_dvs_init:546: ipc ipc_op=71680 ret=0
			d_name=DVS_CLUSTER1 d_nr_dcs=32 d_nr_nodes=32 d_nr_procs=221 d_nr_tasks=35 d_nr_sysprocs=64 
			d_max_copybuf=65536 d_max_copylen=1048576
			d_dbglvl=FFFFFF version=5 flags=0 sizeof(proc)=0
			Get DVS info
			DEBUG 624:dvk_getdvsinfo:248: 
			DEBUG 624:dvk_getdvsinfo:252: ipc ret=0
			local node ID 0...  
			d_name=DVS_CLUSTER1 d_nr_dcs=32 d_nr_nodes=32 d_nr_procs=221 d_nr_tasks=35 d_nr_sysprocs=64 <<<<<<<<<<<< nombre DVS_CLUSTER1
			d_max_copybuf=65536 d_max_copylen=1048576
			d_dbglvl=FFFFFF version=5 flags=101 sizeof(proc)=512					<<<<<<<<<<< flags=0x0101 => (BIT_IPC | BIT_INITIALIZED)


===============================================================================================================
20200722:
	privilegios
	     Los procesos de usuario >= NR_SYSPROCS, por default no tienen privilegios de enviar a ningun proceso
		 Los procesos de systema < NR_SYSPROCS, por default pueden enviarle a todos los procesos.

EJECUTANDO:
		root@node0:~# cd /usr/src/dvs/dvk-tests/
		root@node0:/usr/src/dvs/dvk-tests# ./tests.sh 0 0
		lcl_nodeid=0 dcid=0
		Enter para continuar... 
		Spread Enter para continuar... 
		./tests.sh: lÃ­nea 17:   629 Abortado                /usr/local/sbin/spread -c /etc/spread.conf > /dev/shm/spread.txt  (dir ahora: /usr/src/dvs/dvk-tests)
		mount Enter para continuar... 
		partition 5
		mount Enter para continuar... 
		local_nodeid=0 Enter para continuar... 
		DEBUG 632:dvk_open:102: 
		Initializing DVS. Local node ID 0... 
		DEBUG 632:dvk_dvs_init:542: nodeid=0
		DEBUG 632:dvk_dvs_init:546: ipc ipc_op=71680 ret=0
		d_name=TEST_CLUSTER d_nr_dcs=32 d_nr_nodes=32 d_nr_procs=221 d_nr_tasks=35 d_nr_sysprocs=64 
		d_max_copybuf=65536 d_max_copylen=1048576
		d_dbglvl=FFFFFF version=5 flags=0 sizeof(proc)=0
		Get DVS info
		DEBUG 632:dvk_getdvsinfo:248: 
		DEBUG 632:dvk_getdvsinfo:252: ipc ret=0
		local node ID 0... 
		d_name=TEST_CLUSTER d_nr_dcs=32 d_nr_nodes=32 d_nr_procs=221 d_nr_tasks=35 d_nr_sysprocs=64 
		d_max_copybuf=65536 d_max_copylen=1048576
		d_dbglvl=FFFFFF version=5 flags=101 sizeof(proc)=512
		DC0 Enter para continuar... 
		TCP PROXY Enter para continuar... ^C
		root@node0:/usr/src/dvs/dvk-tests# . /dev/shm/DC0.sh 
		root@node0:/usr/src/dvs/dvk-tests# ./test_sendrec 
		Usage: ./test_sendrec <dcid> <parent_nr> <child_nr>  
		root@node0:/usr/src/dvs/dvk-tests# nsenter -p -t$DC0 ./test_sendrec 0 11 12
		DEBUG 2:dvk_open:102: 
		DEBUG 3:dvk_bind_X:1199: cmd=0 dcid=0 pid=-1 endpoint=12 nodeid=-1
		DEBUG 2:dvk_bind_X:1199: cmd=0 dcid=0 pid=-1 endpoint=11 nodeid=-1
		DEBUG 2:dvk_bind_X:1203: ipc ret=11 errno=0
		PARENT BIND dcid=0 parent_pid=2 parent_nr=11 parent_ep=11 m_ptr=0x1127008
		PARENT pause before SENDREC
		DEBUG 3:dvk_bind_X:1203: ipc ret=12 errno=0
		CHILD BIND dcid=0 child_pid=3 child_nr=12 child_ep=12 m_ptr=0x1127008
		CHILD FIRST RECEIVE
		DEBUG 3:dvk_receive_T:876: endpoint=31438 timeout=-1
		PARENT FIRST SENDREC msg:source=0 type=10 m1i1=1 m1i2=2 m1i3=3 m1p1=(nil) m1p2=(nil) m1p3=(nil) 
		DEBUG 2:dvk_sendrec_T:910: endpoint=12 timeout=-1
		DEBUG 2:dvk_sendrec_T:914: ipc ret=-1
		ERROR: 2:dvk_sendrec_T:915: rcode=-110
		ERROR: 2:dvk_sendrec_T:934: rcode=-110
		ERROR: test_sendrec.c:main:55: rcode=-110
		PARENT FIRST REPLY msg:source=0 type=10 m1i1=1 m1i2=2 m1i3=3 m1p1=(nil) m1p2=(nil) m1p3=(nil) 
		PARENT SECOND SENDREC msg:source=0 type=11 m1i1=5 m1i2=6 m1i3=7 m1p1=(nil) m1p2=(nil) m1p3=(nil) 
		DEBUG 2:dvk_sendrec_T:910: endpoint=12 timeout=-1
		DEBUG 2:dvk_sendrec_T:914: ipc ret=-1
		ERROR: 2:dvk_sendrec_T:915: rcode=-110
		ERROR: 2:dvk_sendrec_T:934: rcode=-110
		ERROR: test_sendrec.c:main:65: rcode=-110
		PARENT SECOND REPLY msg:source=0 type=11 m1i1=5 m1i2=6 m1i3=7 m1p1=(nil) m1p2=(nil) m1p3=(nil) 

EL DMESG
		[  106.660052] DEBUG 647:SYSC_ipc:163: ipc_bind: call=2304 first=0 second=0 third=-1 fifth=-1 
		[  106.660057] DEBUG 647:ipc_bind:185: oper=0 dcid=0 param_pid=-1 endpoint=11 nodeid=-1
		[  106.660061] DEBUG new_bind:1394: oper=0 dcid=0 param_pid=-1 endpoint=11 nodeid=-1
		[  106.660063] DEBUG new_bind:1416: dc_ptr=cca754a0
		[  106.660064] DEBUG new_bind:1418: RLOCK_DC dc=0 count=0
		[  106.660066] DEBUG new_bind:1431: proc_ptr=e79a5a00
		[  106.660067] DEBUG new_bind:1432: WLOCK_PROC ep=11 count=0
		[  106.660069] DEBUG init_proc_desc:16: p_name=$noname dcid=0
		[  106.660070] DEBUG init_proc_desc:27: Clearing Privileges
		[  106.660071] DEBUG init_proc_desc:35: Clearing Process fields
		[  106.660075] DEBUG new_bind:1468: param_pid=-1 lpid=647 vpid=2 tid=647
		[  106.660076] DEBUG new_bind:1492: SELF_BIND param_pid=-1 lpid=647 vpid=2 tid=647
		[  106.660078] DEBUG new_bind:1514: WUNLOCK_PROC ep=11 count=0
		[  106.660079] DEBUG new_bind:1518: WLOCK_TASK pid=647 count=0
		[  106.660080] DEBUG new_bind:1519: WLOCK_PROC ep=11 count=0
		[  106.660081] DEBUG new_bind:1556: increment the reference count of the task struct=647 count=2
		[  106.660083] DEBUG new_bind:1567: process p_name=test_sendrec *p_name_ptr=test_sendrec
		[  106.660084] DEBUG new_bind:1630: PRINT_IPCTO_MAP: 647:new_bind:1630:proc_ptr->p_priv.priv_usr.priv_ipc_to:
		[  106.660086] DEBUG new_bind:1630: FF.
		[  106.660087] DEBUG new_bind:1630: FF.
		[  106.660088] DEBUG new_bind:1630: FF.
		[  106.660089] DEBUG new_bind:1630: FF.
		[  106.660089] DEBUG new_bind:1630: 
		[  106.660091] DEBUG new_bind:1631: PRINT_DVK_MAP: 647:new_bind:1631:proc_ptr->p_priv.priv_usr.priv_dvk_allowed:
		[  106.660092] DEBUG new_bind:1631: FF.
		[  106.660093] DEBUG new_bind:1631: FF.
		[  106.660093] DEBUG new_bind:1631: FF.
		[  106.660094] DEBUG new_bind:1631: 
		[  106.660097] DEBUG new_bind:1635: nr=11 endp=11 dcid=0 flags=0 misc=20 lpid=647 vpid=2 nodeid=0 name=test_sendrec 
		[  106.660099] DEBUG new_bind:1636: nr=11 endp=11 dcid=0 lpid=647 p_cpumask=FFFFFFFF nodemap=1 name=test_sendrec 
		[  106.660100] DEBUG new_bind:1650: WUNLOCK_TASK pid=647 count=0
		[  106.660101] DEBUG new_bind:1656: WUNLOCK_PROC ep=11 count=0
		[  106.660102] DEBUG new_bind:1658: DC_INCREF counter=1
		[  106.660104] DEBUG new_bind:1659: RUNLOCK_DC dc=0 count=0
		[  106.660113] DEBUG 648:SYSC_ipc:163: ipc_bind: call=2304 first=0 second=0 third=-1 fifth=-1 
		[  106.660118] DEBUG 648:ipc_bind:185: oper=0 dcid=0 param_pid=-1 endpoint=12 nodeid=-1
		[  106.660122] DEBUG new_bind:1394: oper=0 dcid=0 param_pid=-1 endpoint=12 nodeid=-1
		[  106.660124] DEBUG new_bind:1416: dc_ptr=cca754a0
		[  106.660126] DEBUG new_bind:1418: RLOCK_DC dc=0 count=0
		[  106.660128] DEBUG new_bind:1431: proc_ptr=e79a5c00
		[  106.660129] DEBUG new_bind:1432: WLOCK_PROC ep=12 count=0
		[  106.660131] DEBUG init_proc_desc:16: p_name=$noname dcid=0
		[  106.660132] DEBUG init_proc_desc:27: Clearing Privileges
		[  106.660133] DEBUG init_proc_desc:35: Clearing Process fields
		[  106.660136] DEBUG new_bind:1468: param_pid=-1 lpid=648 vpid=3 tid=648
		[  106.660138] DEBUG new_bind:1492: SELF_BIND param_pid=-1 lpid=648 vpid=3 tid=648
		[  106.660139] DEBUG new_bind:1514: WUNLOCK_PROC ep=12 count=0
		[  106.660141] DEBUG new_bind:1518: WLOCK_TASK pid=648 count=0
		[  106.660142] DEBUG new_bind:1519: WLOCK_PROC ep=12 count=0
		[  106.660143] DEBUG new_bind:1556: increment the reference count of the task struct=648 count=2
		[  106.660144] DEBUG new_bind:1567: process p_name=test_sendrec *p_name_ptr=test_sendrec
		[  106.660146] DEBUG new_bind:1630: PRINT_IPCTO_MAP: 648:new_bind:1630:proc_ptr->p_priv.priv_usr.priv_ipc_to:
		[  106.660148] DEBUG new_bind:1630: FF.
		[  106.660149] DEBUG new_bind:1630: FF.
		[  106.660150] DEBUG new_bind:1630: FF.
		[  106.660151] DEBUG new_bind:1630: FF.
		[  106.660151] DEBUG new_bind:1630: 
		[  106.660153] DEBUG new_bind:1631: PRINT_DVK_MAP: 648:new_bind:1631:proc_ptr->p_priv.priv_usr.priv_dvk_allowed:
		[  106.660154] DEBUG new_bind:1631: FF.
		[  106.660155] DEBUG new_bind:1631: FF.
		[  106.660156] DEBUG new_bind:1631: FF.
		[  106.660156] DEBUG new_bind:1631: 
		[  106.660159] DEBUG new_bind:1635: nr=12 endp=12 dcid=0 flags=0 misc=20 lpid=648 vpid=3 nodeid=0 name=test_sendrec 
		[  106.660161] DEBUG new_bind:1636: nr=12 endp=12 dcid=0 lpid=648 p_cpumask=FFFFFFFF nodemap=1 name=test_sendrec 
		[  106.660162] DEBUG new_bind:1650: WUNLOCK_TASK pid=648 count=0
		[  106.660163] DEBUG new_bind:1656: WUNLOCK_PROC ep=12 count=0
		[  106.660164] DEBUG new_bind:1658: DC_INCREF counter=2
		[  106.660165] DEBUG new_bind:1659: RUNLOCK_DC dc=0 count=0
		[  106.660254] DEBUG 648:SYSC_ipc:163: ipc_mini_receive: call=768 first=31438 second=0 third=0 fifth=-1 
		[  106.660256] DEBUG 648:ipc_mini_receive:74: src_ep=31438 timeout_ms=-1
		[  106.660257] DEBUG new_mini_receive:303: src_ep=31438
		[  106.660259] DEBUG check_caller:533: caller_pid=648 caller_tgid=648
		[  106.660260] DEBUG check_caller:569: WLOCK_PROC ep=12 count=0
		[  106.660261] DEBUG check_caller:599: WUNLOCK_PROC ep=12 count=0
		[  106.660262] DEBUG check_caller:602: dcid=0
		[  106.660264] DEBUG check_caller:606: RLOCK_DC dc=0 count=0
		[  106.660265] DEBUG check_caller:610: RUNLOCK_DC dc=0 count=0
		[  106.660266] DEBUG check_caller:616: caller_pid=648 
		[  106.660267] DEBUG new_mini_receive:314: RLOCK_PROC ep=12 count=0
		[  106.660269] DEBUG new_mini_receive:318: caller_nr=12 caller_ep=12 src_ep=31438 
		[  106.660270] DEBUG new_mini_receive:322: dcid=0
		[  106.660271] DEBUG new_mini_receive:330: RUNLOCK_PROC ep=12 count=0
		[  106.660272] DEBUG new_mini_receive:332: RLOCK_DC dc=0 count=0
		[  106.660273] DEBUG new_mini_receive:335: RUNLOCK_DC dc=0 count=0
		[  106.660274] DEBUG new_mini_receive:385: WLOCK_PROC ep=12 count=0
		[  106.660276] DEBUG new_mini_receive:490: Any suitable message from 31438 was not found.
		[  106.660277] DEBUG sleep_proc:341: timeout=-1
		[  106.660278] DEBUG sleep_proc:352: BEFORE DOWN lpid=648 p_sem=0 timeout=-1
		[  106.660279] DEBUG sleep_proc:354: endpoint=12 flags=8
		[  106.660280] DEBUG sleep_proc:358: WUNLOCK_PROC ep=12 count=0
		
		[  109.661328] DEBUG 647:SYSC_ipc:163: ipc_mini_sendrec: call=1280 first=12 second=0 third=0 fifth=-1 
		[  109.661335] DEBUG 647:ipc_mini_sendrec:106: srcdst_ep=12 timeout_ms=-1
		[  109.661337] DEBUG new_mini_sendrec:527: srcdst_ep=12
		[  109.661340] DEBUG check_caller:533: caller_pid=647 caller_tgid=647
		[  109.661343] DEBUG check_caller:569: WLOCK_PROC ep=11 count=0
		[  109.661345] DEBUG check_caller:599: WUNLOCK_PROC ep=11 count=0
		[  109.661346] DEBUG check_caller:602: dcid=0
		[  109.661349] DEBUG check_caller:606: RLOCK_DC dc=0 count=0
		[  109.661351] DEBUG check_caller:610: RUNLOCK_DC dc=0 count=0
		[  109.661353] DEBUG check_caller:616: caller_pid=647 
		[  109.661355] DEBUG new_mini_sendrec:538: RLOCK_PROC ep=11 count=0
		[  109.661357] DEBUG new_mini_sendrec:543: caller_nr=11 caller_ep=11 srcdst_ep=12 
		[  109.661359] DEBUG new_mini_sendrec:550: RUNLOCK_PROC ep=11 count=0
		[  109.661361] DEBUG new_mini_sendrec:552: dcid=0
		[  109.661363] DEBUG new_mini_sendrec:556: RLOCK_DC dc=0 count=0
		[  109.661364] DEBUG new_mini_sendrec:560: RUNLOCK_DC dc=0 count=0
		[  109.661366] DEBUG new_mini_sendrec:575: RLOCK_PROC ep=11 count=0
		[  109.661368] DEBUG new_mini_sendrec:579: RUNLOCK_PROC ep=11 count=0
		[  109.661371] ERROR: 647:new_mini_sendrec:579: rcode=-110
		
		[  109.661533] DEBUG 647:SYSC_ipc:163: ipc_mini_sendrec: call=1280 first=12 second=0 third=0 fifth=-1 
		[  109.661536] DEBUG 647:ipc_mini_sendrec:106: srcdst_ep=12 timeout_ms=-1
		[  109.661538] DEBUG new_mini_sendrec:527: srcdst_ep=12
		[  109.661540] DEBUG check_caller:533: caller_pid=647 caller_tgid=647
		[  109.661542] DEBUG check_caller:569: WLOCK_PROC ep=11 count=0
		[  109.661544] DEBUG check_caller:599: WUNLOCK_PROC ep=11 count=0
		[  109.661545] DEBUG check_caller:602: dcid=0
		[  109.661547] DEBUG check_caller:606: RLOCK_DC dc=0 count=0
		[  109.661549] DEBUG check_caller:610: RUNLOCK_DC dc=0 count=0
		[  109.661550] DEBUG check_caller:616: caller_pid=647 
		[  109.661552] DEBUG new_mini_sendrec:538: RLOCK_PROC ep=11 count=0
		[  109.661554] DEBUG new_mini_sendrec:543: caller_nr=11 caller_ep=11 srcdst_ep=12 
		[  109.661556] DEBUG new_mini_sendrec:550: RUNLOCK_PROC ep=11 count=0
		[  109.661558] DEBUG new_mini_sendrec:552: dcid=0
		[  109.661559] DEBUG new_mini_sendrec:556: RLOCK_DC dc=0 count=0
		[  109.661561] DEBUG new_mini_sendrec:560: RUNLOCK_DC dc=0 count=0
		[  109.661563] DEBUG new_mini_sendrec:575: RLOCK_PROC ep=11 count=0
		[  109.661565] DEBUG new_mini_sendrec:579: RUNLOCK_PROC ep=11 count=0
		[  109.661567] ERROR: 647:new_mini_sendrec:579: rcode=-110 <<<<<  EDVSTRAPDENIED


===============================================================================================================
20200723:

EJECUTANDO:
		Root@node0:/usr/src/dvs/dvk-tests# nsenter -p -t$DC0 ./test_sendrec 0 11 12
		DEBUG 2:dvk_open:102: 
		DEBUG 2:dvk_bind_X:1199: cmd=0 dcid=0 pid=-1 endpoint=11 nodeid=-1
		DEBUG 2:dvk_bind_X:1203: ipc ret=11 errno=0
		PARENT BIND dcid=0 parent_pid=2 parent_nr=11 parent_ep=11 m_ptr=0x15f4008
		PARENT pause before SENDREC
		DEBUG 3:dvk_bind_X:1199: cmd=0 dcid=0 pid=-1 endpoint=12 nodeid=-1
		DEBUG 3:dvk_bind_X:1203: ipc ret=12 errno=0
		CHILD BIND dcid=0 child_pid=3 child_nr=12 child_ep=12 m_ptr=0x15f4008
		CHILD FIRST RECEIVE
		DEBUG 3:dvk_receive_T:876: endpoint=31438 timeout=-1
		PARENT FIRST SENDREC msg:source=0 type=10 m1i1=1 m1i2=2 m1i3=3 m1p1=(nil) m1p2=(nil) m1p3=(nil) 
		DEBUG 2:dvk_sendrec_T:910: endpoint=12 timeout=-1
		DEBUG 3:dvk_receive_T:880: ipc ret=0
		CHILD RECEIVE msg:source=11 type=10 m1i1=1 m1i2=2 m1i3=3 m1p1=(nil) m1p2=(nil) m1p3=(nil) 
		CHILD FIRST SEND
		DEBUG 3:dvk_send_T:843: endpoint=11 timeout=-1
		DEBUG 3:dvk_send_T:847: ipc ret=76
		DEBUG 2:dvk_sendrec_T:914: ipc ret=0
		PARENT FIRST REPLY msg:source=12 type=254 m1i1=1 m1i2=2 m1i3=3 m1p1=(nil) m1p2=(nil) m1p3=(nil) 
		PARENT SECOND SENDREC msg:source=12 type=11 m1i1=5 m1i2=6 m1i3=7 m1p1=(nil) m1p2=(nil) m1p3=(nil) 
		DEBUG 2:dvk_sendrec_T:910: endpoint=12 timeout=-1
		CHILD SECOND RECEIVE
		DEBUG 3:dvk_receive_T:876: endpoint=31438 timeout=-1
		DEBUG 3:dvk_receive_T:880: ipc ret=0
		CHILD RECEIVE msg:source=11 type=11 m1i1=5 m1i2=6 m1i3=7 m1p1=(nil) m1p2=(nil) m1p3=(nil) 
		CHILD SECOND SEND
		DEBUG 3:dvk_send_T:843: endpoint=11 timeout=-1
		DEBUG 3:dvk_send_T:847: ipc ret=76
		DEBUG 2:dvk_sendrec_T:914: ipc ret=0
		PARENT SECOND REPLY msg:source=12 type=239 m1i1=5 m1i2=6 m1i3=7 m1p1=(nil) m1p2=(nil) m1p3=(nil) 
		DEBUG 2:dvk_getprocinfo:1156: dcid=0 p_nr=11 
		DEBUG 2:dvk_getprocinfo:1160: ipc ret=0
		nr=11 endp=11 dcid=0 flags=0 misc=20 lpid=658 vpid=2 nodeid=0 name=test_sendrec 
		endp=11 dcid=0 flags=0 p_getfrom=27342 p_sendto=27342 p_waitmigr=27342 p_waitunbind=27342 p_proxy=27342
		nr=11 endp=11 dcid=0 p_lclsent=2 p_rmtsent=0 p_lclcopy=0 p_rmtcopy=0 

DMESG 
		[   62.066811] DEBUG 658:SYSC_ipc:163: ipc_bind: call=2304 first=0 second=0 third=-1 fifth=-1 
		[   62.066816] DEBUG 658:ipc_bind:185: oper=0 dcid=0 param_pid=-1 endpoint=11 nodeid=-1
		[   62.066820] DEBUG new_bind:1394: oper=0 dcid=0 param_pid=-1 endpoint=11 nodeid=-1
		[   62.066822] DEBUG new_bind:1416: dc_ptr=d7a754a0
		[   62.066824] DEBUG new_bind:1418: RLOCK_DC dc=0 count=0
		[   62.066825] DEBUG new_bind:1431: proc_ptr=e7925a00
		[   62.066826] DEBUG new_bind:1432: WLOCK_PROC ep=11 count=0
		[   62.066828] DEBUG init_proc_desc:16: p_name=$noname dcid=0
		[   62.066830] DEBUG init_proc_desc:27: Clearing Privileges
		[   62.066830] DEBUG init_proc_desc:35: Clearing Process fields
		[   62.066833] DEBUG new_bind:1468: param_pid=-1 lpid=658 vpid=2 tid=658
		[   62.066835] DEBUG new_bind:1492: SELF_BIND param_pid=-1 lpid=658 vpid=2 tid=658
		[   62.066837] DEBUG new_bind:1514: WUNLOCK_PROC ep=11 count=0
		[   62.066838] DEBUG new_bind:1518: WLOCK_TASK pid=658 count=0
		[   62.066839] DEBUG new_bind:1519: WLOCK_PROC ep=11 count=0
		[   62.066840] DEBUG new_bind:1556: increment the reference count of the task struct=658 count=2
		[   62.066842] DEBUG new_bind:1567: process p_name=test_sendrec *p_name_ptr=test_sendrec
		[   62.066843] DEBUG new_bind:1630: PRINT_IPCTO_MAP: 658:new_bind:1630:proc_ptr->p_priv.priv_usr.priv_ipc_to:
		[   62.066845] DEBUG new_bind:1630: PRINT_IPCTO_MAP: 658:new_bind:1630:4:
		[   62.066846] DEBUG new_bind:1630: FFFF.
		[   62.066848] DEBUG new_bind:1630: FFFF.
		[   62.066848] DEBUG new_bind:1630: FFFF.
		[   62.066849] DEBUG new_bind:1630: FFFF.
		[   62.066850] DEBUG new_bind:1630: 
		[   62.066852] DEBUG new_bind:1631: PRINT_DVK_MAP: 658:new_bind:1631:proc_ptr->p_priv.priv_usr.priv_dvk_allowed:
		[   62.066853] DEBUG new_bind:1631: PRINT_IPCTO_MAP: 658:new_bind:1631:3:
		[   62.066854] DEBUG new_bind:1631: FF.
		[   62.066855] DEBUG new_bind:1631: FF.
		[   62.066856] DEBUG new_bind:1631: FF.
		[   62.066857] DEBUG new_bind:1631: 
		[   62.066859] DEBUG new_bind:1635: nr=11 endp=11 dcid=0 flags=0 misc=20 lpid=658 vpid=2 nodeid=0 name=test_sendrec 
		[   62.066861] DEBUG new_bind:1636: nr=11 endp=11 dcid=0 lpid=658 p_cpumask=FFFFFFFF nodemap=1 name=test_sendrec 
		[   62.066862] DEBUG new_bind:1650: WUNLOCK_TASK pid=658 count=0
		[   62.066863] DEBUG new_bind:1656: WUNLOCK_PROC ep=11 count=0
		[   62.066864] DEBUG new_bind:1658: DC_INCREF counter=1
		[   62.066865] DEBUG new_bind:1659: RUNLOCK_DC dc=0 count=0
		[   62.067359] DEBUG 659:SYSC_ipc:163: ipc_bind: call=2304 first=0 second=0 third=-1 fifth=-1 
		[   62.067403] DEBUG 659:ipc_bind:185: oper=0 dcid=0 param_pid=-1 endpoint=12 nodeid=-1
		[   62.067408] DEBUG new_bind:1394: oper=0 dcid=0 param_pid=-1 endpoint=12 nodeid=-1
		[   62.067410] DEBUG new_bind:1416: dc_ptr=d7a754a0
		[   62.067412] DEBUG new_bind:1418: RLOCK_DC dc=0 count=0
		[   62.067413] DEBUG new_bind:1431: proc_ptr=e7925c00
		[   62.067415] DEBUG new_bind:1432: WLOCK_PROC ep=12 count=0
		[   62.067417] DEBUG init_proc_desc:16: p_name=$noname dcid=0
		[   62.067418] DEBUG init_proc_desc:27: Clearing Privileges
		[   62.067418] DEBUG init_proc_desc:35: Clearing Process fields
		[   62.067422] DEBUG new_bind:1468: param_pid=-1 lpid=659 vpid=3 tid=659
		[   62.067424] DEBUG new_bind:1492: SELF_BIND param_pid=-1 lpid=659 vpid=3 tid=659
		[   62.067425] DEBUG new_bind:1514: WUNLOCK_PROC ep=12 count=0
		[   62.067427] DEBUG new_bind:1518: WLOCK_TASK pid=659 count=0
		[   62.067428] DEBUG new_bind:1519: WLOCK_PROC ep=12 count=0
		[   62.067429] DEBUG new_bind:1556: increment the reference count of the task struct=659 count=2
		[   62.067430] DEBUG new_bind:1567: process p_name=test_sendrec *p_name_ptr=test_sendrec
		[   62.067432] DEBUG new_bind:1630: PRINT_IPCTO_MAP: 659:new_bind:1630:proc_ptr->p_priv.priv_usr.priv_ipc_to:
		[   62.067434] DEBUG new_bind:1630: PRINT_IPCTO_MAP: 659:new_bind:1630:4:
		[   62.067435] DEBUG new_bind:1630: FFFF.
		[   62.067436] DEBUG new_bind:1630: FFFF.
		[   62.067437] DEBUG new_bind:1630: FFFF.
		[   62.067438] DEBUG new_bind:1630: FFFF.
		[   62.067439] DEBUG new_bind:1630: 
		[   62.067440] DEBUG new_bind:1631: PRINT_DVK_MAP: 659:new_bind:1631:proc_ptr->p_priv.priv_usr.priv_dvk_allowed:
		[   62.067441] DEBUG new_bind:1631: PRINT_IPCTO_MAP: 659:new_bind:1631:3:
		[   62.067442] DEBUG new_bind:1631: FF.
		[   62.067443] DEBUG new_bind:1631: FF.
		[   62.067444] DEBUG new_bind:1631: FF.
		[   62.067445] DEBUG new_bind:1631: 
		[   62.067447] DEBUG new_bind:1635: nr=12 endp=12 dcid=0 flags=0 misc=20 lpid=659 vpid=3 nodeid=0 name=test_sendrec 
		[   62.067449] DEBUG new_bind:1636: nr=12 endp=12 dcid=0 lpid=659 p_cpumask=FFFFFFFF nodemap=1 name=test_sendrec 
		[   62.067450] DEBUG new_bind:1650: WUNLOCK_TASK pid=659 count=0
		[   62.067452] DEBUG new_bind:1656: WUNLOCK_PROC ep=12 count=0
		[   62.067453] DEBUG new_bind:1658: DC_INCREF counter=2
		[   62.067454] DEBUG new_bind:1659: RUNLOCK_DC dc=0 count=0
		[   62.067514] DEBUG 659:SYSC_ipc:163: ipc_mini_receive: call=768 first=31438 second=0 third=0 fifth=-1 
		[   62.067516] DEBUG 659:ipc_mini_receive:74: src_ep=31438 timeout_ms=-1
		[   62.067518] DEBUG new_mini_receive:303: src_ep=31438
		[   62.067550] DEBUG check_caller:533: caller_pid=659 caller_tgid=659
		[   62.067552] DEBUG check_caller:569: WLOCK_PROC ep=12 count=0
		[   62.067553] DEBUG check_caller:599: WUNLOCK_PROC ep=12 count=0
		[   62.067554] DEBUG check_caller:602: dcid=0
		[   62.067556] DEBUG check_caller:606: RLOCK_DC dc=0 count=0
		[   62.067557] DEBUG check_caller:610: RUNLOCK_DC dc=0 count=0
		[   62.067558] DEBUG check_caller:616: caller_pid=659 
		[   62.067559] DEBUG new_mini_receive:314: RLOCK_PROC ep=12 count=0
		[   62.067561] DEBUG new_mini_receive:318: caller_nr=12 caller_ep=12 src_ep=31438 
		[   62.067562] DEBUG new_mini_receive:322: dcid=0
		[   62.067563] DEBUG new_mini_receive:330: RUNLOCK_PROC ep=12 count=0
		[   62.067564] DEBUG new_mini_receive:332: RLOCK_DC dc=0 count=0
		[   62.067565] DEBUG new_mini_receive:335: RUNLOCK_DC dc=0 count=0
		[   62.067566] DEBUG new_mini_receive:385: WLOCK_PROC ep=12 count=0
		[   62.067568] DEBUG new_mini_receive:490: Any suitable message from 31438 was not found.
		[   62.067569] DEBUG sleep_proc:341: timeout=-1
		[   62.067571] DEBUG sleep_proc:352: BEFORE DOWN lpid=659 p_sem=0 timeout=-1
		[   62.067572] DEBUG sleep_proc:354: endpoint=12 flags=8
		[   62.067573] DEBUG sleep_proc:358: WUNLOCK_PROC ep=12 count=0
		[   65.068118] DEBUG 658:SYSC_ipc:163: ipc_mini_sendrec: call=1280 first=12 second=0 third=0 fifth=-1 
		[   65.068125] DEBUG 658:ipc_mini_sendrec:106: srcdst_ep=12 timeout_ms=-1
		[   65.068128] DEBUG new_mini_sendrec:527: srcdst_ep=12
		[   65.068131] DEBUG check_caller:533: caller_pid=658 caller_tgid=658
		[   65.068134] DEBUG check_caller:569: WLOCK_PROC ep=11 count=0
		[   65.068136] DEBUG check_caller:599: WUNLOCK_PROC ep=11 count=0
		[   65.068137] DEBUG check_caller:602: dcid=0
		[   65.068140] DEBUG check_caller:606: RLOCK_DC dc=0 count=0
		[   65.068142] DEBUG check_caller:610: RUNLOCK_DC dc=0 count=0
		[   65.068144] DEBUG check_caller:616: caller_pid=658 
		[   65.068146] DEBUG new_mini_sendrec:538: RLOCK_PROC ep=11 count=0
		[   65.068148] DEBUG new_mini_sendrec:543: caller_nr=11 caller_ep=11 srcdst_ep=12 
		[   65.068150] DEBUG new_mini_sendrec:550: RUNLOCK_PROC ep=11 count=0
		[   65.068152] DEBUG new_mini_sendrec:552: dcid=0
		[   65.068154] DEBUG new_mini_sendrec:556: RLOCK_DC dc=0 count=0
		[   65.068155] DEBUG new_mini_sendrec:560: RUNLOCK_DC dc=0 count=0
		[   65.068157] DEBUG new_mini_sendrec:575: RLOCK_PROC ep=11 count=0
		[   65.068159] DEBUG new_mini_sendrec:586: RUNLOCK_PROC ep=11 count=0
		[   65.068161] DEBUG new_mini_sendrec:592: WLOCK_PROC ep=12 count=0
		[   65.068163] DEBUG new_mini_sendrec:594: srcdst_nr=12 srcdst_ep=12
		[   65.068165] DEBUG new_mini_sendrec:614: srcdst_ptr->p_usr.p_nodeid=0
		[   65.068167] DEBUG new_mini_sendrec:618: RLOCK_DC dc=0 count=0
		[   65.068169] DEBUG new_mini_sendrec:622: RUNLOCK_DC dc=0 count=0
		[   65.068171] DEBUG new_mini_sendrec:637: dcid=0 caller_pid=658 caller_nr=11 srcdst_ep=12 
		[   65.068173] DEBUG new_mini_sendrec:642: SENDING HALF
		[   65.068174] DEBUG new_mini_sendrec:726: destination is waiting. Copy the message and wakeup destination
		[   65.068178] DEBUG copy_usr2usr:884: rqtr_ep=11 src_ep=11 src_lpid=658 src_vpid=2 src_addr=015f4008
		[   65.068182] DEBUG copy_usr2usr:887: dst_ep=12 dst_lpid=659 dst_vpid=3 dst_addr=015f4008 bytes=76
		[   65.068183] DEBUG copy_usr2usr:891: task_pid_nr(current)=658
		[   65.068185] DEBUG copy_usr2usr:894: WRITE
		[   65.068187] DEBUG copy_usr2usr:899: task_pid_nr(dst_ptr->p_task)=659
		[   65.068191] DEBUG dvk_vm_rw:442: pid=659 liovcnt=1 riovcnt=1 flags=0 vm_write=1
		[   65.068193] DEBUG dvk_check_iovect:1280: type=1 nr_segs=1
		[   65.068195] DEBUG dvk_rw_check_kvector:862: type=1 nr_segs=1
		[   65.068197] DEBUG dvk_rw_check_kvector:862: type=-1 nr_segs=1
		[   65.068200] DEBUG dvk_vm_rw_core:277: pid=659 riovcnt=1 flags=0 vm_write=1
		[   65.068207] DEBUG dvk_vm_rw_core:331: i=0 rc=0
		[   65.068227] DEBUG dvk_vm_rw_core:349: rc=76
		[   65.068229] DEBUG dvk_vm_rw_core:356: rc=76
		[   65.068231] DEBUG copy_usr2usr:952: len=76
		[   65.068233] DEBUG inherit_cpu:285: cpuid=1 vpid=3
		[   65.068245] DEBUG inherit_cpu:293: nr=12 endp=12 dcid=0 lpid=659 p_cpumask=FFFFFFFF nodemap=1 name=test_sendrec 
		[   65.068247] DEBUG new_mini_sendrec:732: BEFORE UP lpid=659 p_sem=-1 rcode=76
		[   65.068263] DEBUG new_mini_sendrec:740: WUNLOCK_PROC ep=12 count=0
		[   65.068265] DEBUG sleep_proc:341: timeout=-1
		[   65.068267] DEBUG sleep_proc:352: BEFORE DOWN lpid=658 p_sem=0 timeout=-1
		[   65.068269] DEBUG sleep_proc:354: endpoint=11 flags=8
		[   65.068270] DEBUG sleep_proc:358: WUNLOCK_PROC ep=11 count=1
		[   65.068284] DEBUG sleep_proc:365: endpoint=12 ret=0 p_rcode=76
		[   65.068286] DEBUG sleep_proc:366: endpoint=12 flags=0 cpuid=1
		[   65.068288] DEBUG sleep_proc:367: WLOCK_PROC ep=12 count=0
		[   65.068291] DEBUG sleep_proc:414: nr=12 endp=12 dcid=0 lpid=659 p_cpumask=FFFFFFFF nodemap=1 name=test_sendrec 
		[   65.068293] DEBUG sleep_proc:416: someone wakeups me: sem=0 p_rcode=0
		[   65.068295] DEBUG new_mini_receive:507: WUNLOCK_PROC ep=12 count=0
		[   65.068430] DEBUG 659:SYSC_ipc:163: ipc_mini_send: call=512 first=11 second=0 third=0 fifth=-1 
		[   65.068433] DEBUG 659:ipc_mini_send:52: dst_ep=11 timeout_ms=-1
		[   65.068434] DEBUG new_mini_send:32: dst_ep=11
		[   65.068437] DEBUG check_caller:533: caller_pid=659 caller_tgid=659
		[   65.068439] DEBUG check_caller:569: WLOCK_PROC ep=12 count=0
		[   65.068440] DEBUG check_caller:599: WUNLOCK_PROC ep=12 count=0
		[   65.068442] DEBUG check_caller:602: dcid=0
		[   65.068444] DEBUG check_caller:606: RLOCK_DC dc=0 count=0
		[   65.068446] DEBUG check_caller:610: RUNLOCK_DC dc=0 count=0
		[   65.068447] DEBUG check_caller:616: caller_pid=659 
		[   65.068449] DEBUG new_mini_send:44: RLOCK_PROC ep=12 count=0
		[   65.068452] DEBUG new_mini_send:48: caller_nr=12 caller_ep=12 dst_ep=11 
		[   65.068453] DEBUG new_mini_send:53: RUNLOCK_PROC ep=12 count=0
		[   65.068455] DEBUG new_mini_send:55: dcid=0
		[   65.068457] DEBUG new_mini_send:59: RLOCK_DC dc=0 count=0
		[   65.068458] DEBUG new_mini_send:64: RUNLOCK_DC dc=0 count=0
		[   65.068460] DEBUG new_mini_send:79: RLOCK_PROC ep=12 count=0
		[   65.068462] DEBUG new_mini_send:90: RUNLOCK_PROC ep=12 count=0
		[   65.068464] DEBUG new_mini_send:93: WUNLOCK_PROC ep=12 count=1
		[   65.068466] DEBUG new_mini_send:93: WLOCK_PROC ep=11 count=1
		[   65.068468] DEBUG new_mini_send:93: WLOCK_PROC ep=12 count=1
		[   65.068470] DEBUG new_mini_send:98: dst_nr=11 dst_ep=11
		[   65.068471] DEBUG new_mini_send:117: dst_ptr->p_usr.p_nodeid=0
		[   65.068473] DEBUG new_mini_send:121: RLOCK_DC dc=0 count=0
		[   65.068475] DEBUG new_mini_send:125: RUNLOCK_DC dc=0 count=0
		[   65.068477] DEBUG new_mini_send:140: dcid=0 caller_pid=659 caller_nr=12 dst_ep=11 
		[   65.068479] DEBUG new_mini_send:222: destination is waiting. Copy the message and wakeup destination
		[   65.068482] DEBUG copy_usr2usr:884: rqtr_ep=12 src_ep=12 src_lpid=659 src_vpid=3 src_addr=015f4008
		[   65.068485] DEBUG copy_usr2usr:887: dst_ep=11 dst_lpid=658 dst_vpid=2 dst_addr=015f4008 bytes=76
		[   65.068486] DEBUG copy_usr2usr:891: task_pid_nr(current)=659
		[   65.068488] DEBUG copy_usr2usr:894: WRITE
		[   65.068489] DEBUG copy_usr2usr:899: task_pid_nr(dst_ptr->p_task)=658
		[   65.068492] DEBUG dvk_vm_rw:442: pid=658 liovcnt=1 riovcnt=1 flags=0 vm_write=1
		[   65.068494] DEBUG dvk_check_iovect:1280: type=1 nr_segs=1
		[   65.068496] DEBUG dvk_rw_check_kvector:862: type=1 nr_segs=1
		[   65.068498] DEBUG dvk_rw_check_kvector:862: type=-1 nr_segs=1
		[   65.068500] DEBUG dvk_vm_rw_core:277: pid=658 riovcnt=1 flags=0 vm_write=1
		[   65.068505] DEBUG dvk_vm_rw_core:331: i=0 rc=0
		[   65.068518] DEBUG dvk_vm_rw_core:349: rc=76
		[   65.068520] DEBUG dvk_vm_rw_core:356: rc=76
		[   65.068522] DEBUG copy_usr2usr:952: len=76
		[   65.068524] DEBUG inherit_cpu:285: cpuid=1 vpid=2
		[   65.068531] DEBUG inherit_cpu:293: nr=11 endp=11 dcid=0 lpid=658 p_cpumask=FFFFFFFF nodemap=1 name=test_sendrec 
		[   65.068533] DEBUG new_mini_send:233: BEFORE UP lpid=658 p_sem=-1 rcode=76
		[   65.068541] DEBUG new_mini_send:234: WUNLOCK_PROC ep=11 count=1
		[   65.068543] DEBUG new_mini_send:272: WUNLOCK_PROC ep=12 count=1
		[   65.068584] DEBUG sleep_proc:365: endpoint=11 ret=0 p_rcode=76
		[   65.068586] DEBUG sleep_proc:366: endpoint=11 flags=0 cpuid=1
		[   65.068588] DEBUG sleep_proc:367: WLOCK_PROC ep=11 count=1
		[   65.068591] DEBUG sleep_proc:414: nr=11 endp=11 dcid=0 lpid=658 p_cpumask=FFFFFFFF nodemap=1 name=test_sendrec 
		[   65.068593] DEBUG sleep_proc:416: someone wakeups me: sem=0 p_rcode=0
		[   65.068595] DEBUG new_mini_sendrec:813: WUNLOCK_PROC ep=11 count=1
		[   65.068635] DEBUG 658:SYSC_ipc:163: ipc_mini_sendrec: call=1280 first=12 second=0 third=0 fifth=-1 
		[   65.068637] DEBUG 658:ipc_mini_sendrec:106: srcdst_ep=12 timeout_ms=-1
		[   65.068639] DEBUG new_mini_sendrec:527: srcdst_ep=12
		[   65.068641] DEBUG check_caller:533: caller_pid=658 caller_tgid=658
		[   65.068643] DEBUG check_caller:569: WLOCK_PROC ep=11 count=1
		[   65.068645] DEBUG check_caller:599: WUNLOCK_PROC ep=11 count=1
		[   65.068646] DEBUG check_caller:602: dcid=0
		[   65.068648] DEBUG check_caller:606: RLOCK_DC dc=0 count=0
		[   65.068650] DEBUG check_caller:610: RUNLOCK_DC dc=0 count=0
		[   65.068651] DEBUG check_caller:616: caller_pid=658 
		[   65.068653] DEBUG new_mini_sendrec:538: RLOCK_PROC ep=11 count=1
		[   65.068656] DEBUG new_mini_sendrec:543: caller_nr=11 caller_ep=11 srcdst_ep=12 
		[   65.068657] DEBUG new_mini_sendrec:550: RUNLOCK_PROC ep=11 count=1
		[   65.068659] DEBUG new_mini_sendrec:552: dcid=0
		[   65.068661] DEBUG new_mini_sendrec:556: RLOCK_DC dc=0 count=0
		[   65.068663] DEBUG new_mini_sendrec:560: RUNLOCK_DC dc=0 count=0
		[   65.068665] DEBUG new_mini_sendrec:575: RLOCK_PROC ep=11 count=1
		[   65.068721] DEBUG new_mini_sendrec:586: RUNLOCK_PROC ep=11 count=1
		[   65.068729] DEBUG new_mini_sendrec:592: WLOCK_PROC ep=12 count=1
		[   65.068732] DEBUG new_mini_sendrec:594: srcdst_nr=12 srcdst_ep=12
		[   65.068734] DEBUG new_mini_sendrec:614: srcdst_ptr->p_usr.p_nodeid=0
		[   65.068737] DEBUG new_mini_sendrec:618: RLOCK_DC dc=0 count=0
		[   65.068739] DEBUG new_mini_sendrec:622: RUNLOCK_DC dc=0 count=0
		[   65.068743] DEBUG new_mini_sendrec:637: dcid=0 caller_pid=658 caller_nr=11 srcdst_ep=12 
		[   65.068744] DEBUG new_mini_sendrec:642: SENDING HALF
		[   65.068746] DEBUG new_mini_sendrec:775: destination is not waiting to receive srcdst_ptr-flags=0. Enqueue at TAIL.
		[   65.068751] DEBUG sleep_proc2:718: BEFORE DOWN lpid=658 p_sem=0 timeout=-1
		[   65.068753] DEBUG sleep_proc2:720: endpoint=11 flags=C
		[   65.068755] DEBUG sleep_proc2:724: WUNLOCK_PROC ep=11 count=2
		[   65.068757] DEBUG sleep_proc2:724: WUNLOCK_PROC ep=12 count=1
		[   65.068759] DEBUG sleep_proc2:725: endpoint=11 flags=C
		[   75.071018] DEBUG 659:SYSC_ipc:163: ipc_mini_receive: call=768 first=31438 second=0 third=0 fifth=-1 
		[   75.071023] DEBUG 659:ipc_mini_receive:74: src_ep=31438 timeout_ms=-1
		[   75.071025] DEBUG new_mini_receive:303: src_ep=31438
		[   75.071027] DEBUG check_caller:533: caller_pid=659 caller_tgid=659
		[   75.071029] DEBUG check_caller:569: WLOCK_PROC ep=12 count=1
		[   75.071030] DEBUG check_caller:599: WUNLOCK_PROC ep=12 count=1
		[   75.071031] DEBUG check_caller:602: dcid=0
		[   75.071033] DEBUG check_caller:606: RLOCK_DC dc=0 count=0
		[   75.071034] DEBUG check_caller:610: RUNLOCK_DC dc=0 count=0
		[   75.071035] DEBUG check_caller:616: caller_pid=659 
		[   75.071036] DEBUG new_mini_receive:314: RLOCK_PROC ep=12 count=1
		[   75.071038] DEBUG new_mini_receive:318: caller_nr=12 caller_ep=12 src_ep=31438 
		[   75.071038] DEBUG new_mini_receive:322: dcid=0
		[   75.071040] DEBUG new_mini_receive:330: RUNLOCK_PROC ep=12 count=1
		[   75.071041] DEBUG new_mini_receive:332: RLOCK_DC dc=0 count=0
		[   75.071042] DEBUG new_mini_receive:335: RUNLOCK_DC dc=0 count=0
		[   75.071043] DEBUG new_mini_receive:385: WLOCK_PROC ep=12 count=1
		[   75.071045] DEBUG new_mini_receive:434: WUNLOCK_PROC ep=12 count=1
		[   75.071046] DEBUG new_mini_receive:435: WLOCK_PROC ep=11 count=2
		[   75.071047] DEBUG new_mini_receive:436: WLOCK_PROC ep=12 count=1
		[   75.071048] DEBUG new_mini_receive:440: Found acceptable message from 11. Copy it and update status.
		[   75.071049] DEBUG new_mini_receive:443: LIST_DEL
		[   75.071052] DEBUG copy_usr2usr:884: rqtr_ep=11 src_ep=11 src_lpid=658 src_vpid=2 src_addr=015f4008
		[   75.071054] DEBUG copy_usr2usr:887: dst_ep=12 dst_lpid=659 dst_vpid=3 dst_addr=015f4008 bytes=76
		[   75.071055] DEBUG copy_usr2usr:891: task_pid_nr(current)=659
		[   75.071055] DEBUG copy_usr2usr:902: READ
		[   75.071057] DEBUG copy_usr2usr:907: task_pid_nr(src_ptr->p_task)=658
		[   75.071059] DEBUG dvk_vm_rw:442: pid=658 liovcnt=1 riovcnt=1 flags=0 vm_write=0
		[   75.071061] DEBUG dvk_check_iovect:1280: type=0 nr_segs=1
		[   75.071062] DEBUG dvk_rw_check_kvector:862: type=0 nr_segs=1
		[   75.071063] DEBUG dvk_rw_check_kvector:862: type=-1 nr_segs=1
		[   75.071065] DEBUG dvk_vm_rw_core:277: pid=658 riovcnt=1 flags=0 vm_write=0
		[   75.071072] DEBUG dvk_vm_rw_core:331: i=0 rc=0
		[   75.071086] DEBUG dvk_vm_rw_core:349: rc=76
		[   75.071087] DEBUG dvk_vm_rw_core:356: rc=76
		[   75.071089] DEBUG copy_usr2usr:952: len=76
		[   75.071090] DEBUG new_mini_receive:475: WUNLOCK_PROC ep=11 count=2
		[   75.071092] DEBUG new_mini_receive:476: WUNLOCK_PROC ep=12 count=1
		[   75.071144] DEBUG 659:SYSC_ipc:163: ipc_mini_send: call=512 first=11 second=0 third=0 fifth=-1 
		[   75.071145] DEBUG 659:ipc_mini_send:52: dst_ep=11 timeout_ms=-1
		[   75.071146] DEBUG new_mini_send:32: dst_ep=11
		[   75.071148] DEBUG check_caller:533: caller_pid=659 caller_tgid=659
		[   75.071149] DEBUG check_caller:569: WLOCK_PROC ep=12 count=1
		[   75.071150] DEBUG check_caller:599: WUNLOCK_PROC ep=12 count=1
		[   75.071151] DEBUG check_caller:602: dcid=0
		[   75.071152] DEBUG check_caller:606: RLOCK_DC dc=0 count=0
		[   75.071153] DEBUG check_caller:610: RUNLOCK_DC dc=0 count=0
		[   75.071154] DEBUG check_caller:616: caller_pid=659 
		[   75.071155] DEBUG new_mini_send:44: RLOCK_PROC ep=12 count=1
		[   75.071157] DEBUG new_mini_send:48: caller_nr=12 caller_ep=12 dst_ep=11 
		[   75.071158] DEBUG new_mini_send:53: RUNLOCK_PROC ep=12 count=1
		[   75.071159] DEBUG new_mini_send:55: dcid=0
		[   75.071160] DEBUG new_mini_send:59: RLOCK_DC dc=0 count=0
		[   75.071161] DEBUG new_mini_send:64: RUNLOCK_DC dc=0 count=0
		[   75.071162] DEBUG new_mini_send:79: RLOCK_PROC ep=12 count=1
		[   75.071163] DEBUG new_mini_send:90: RUNLOCK_PROC ep=12 count=1
		[   75.071165] DEBUG new_mini_send:93: WUNLOCK_PROC ep=12 count=2
		[   75.071166] DEBUG new_mini_send:93: WLOCK_PROC ep=11 count=2
		[   75.071167] DEBUG new_mini_send:93: WLOCK_PROC ep=12 count=2
		[   75.071168] DEBUG new_mini_send:98: dst_nr=11 dst_ep=11
		[   75.071169] DEBUG new_mini_send:117: dst_ptr->p_usr.p_nodeid=0
		[   75.071170] DEBUG new_mini_send:121: RLOCK_DC dc=0 count=0
		[   75.071171] DEBUG new_mini_send:125: RUNLOCK_DC dc=0 count=0
		[   75.071172] DEBUG new_mini_send:140: dcid=0 caller_pid=659 caller_nr=12 dst_ep=11 
		[   75.071174] DEBUG new_mini_send:222: destination is waiting. Copy the message and wakeup destination
		[   75.071175] DEBUG copy_usr2usr:884: rqtr_ep=12 src_ep=12 src_lpid=659 src_vpid=3 src_addr=015f4008
		[   75.071177] DEBUG copy_usr2usr:887: dst_ep=11 dst_lpid=658 dst_vpid=2 dst_addr=015f4008 bytes=76
		[   75.071178] DEBUG copy_usr2usr:891: task_pid_nr(current)=659
		[   75.071179] DEBUG copy_usr2usr:894: WRITE
		[   75.071180] DEBUG copy_usr2usr:899: task_pid_nr(dst_ptr->p_task)=658
		[   75.071181] DEBUG dvk_vm_rw:442: pid=658 liovcnt=1 riovcnt=1 flags=0 vm_write=1
		[   75.071182] DEBUG dvk_check_iovect:1280: type=1 nr_segs=1
		[   75.071184] DEBUG dvk_rw_check_kvector:862: type=1 nr_segs=1
		[   75.071185] DEBUG dvk_rw_check_kvector:862: type=-1 nr_segs=1
		[   75.071186] DEBUG dvk_vm_rw_core:277: pid=658 riovcnt=1 flags=0 vm_write=1
		[   75.071188] DEBUG dvk_vm_rw_core:331: i=0 rc=0
		[   75.071197] DEBUG dvk_vm_rw_core:349: rc=76
		[   75.071198] DEBUG dvk_vm_rw_core:356: rc=76
		[   75.071199] DEBUG copy_usr2usr:952: len=76
		[   75.071201] DEBUG inherit_cpu:285: cpuid=1 vpid=2
		[   75.071207] DEBUG inherit_cpu:293: nr=11 endp=11 dcid=0 lpid=658 p_cpumask=FFFFFFFF nodemap=1 name=test_sendrec 
		[   75.071208] DEBUG new_mini_send:233: BEFORE UP lpid=658 p_sem=-1 rcode=76
		[   75.071218] DEBUG new_mini_send:234: WUNLOCK_PROC ep=11 count=2
		[   75.071220] DEBUG new_mini_send:272: WUNLOCK_PROC ep=12 count=2
		[   75.071927] DEBUG sleep_proc2:733: endpoint=11 ret=0 p_rcode=76
		[   75.071931] DEBUG sleep_proc2:734: endpoint=11 flags=0 cpuid=1
		[   75.071932] DEBUG sleep_proc2:736: WLOCK_PROC ep=11 count=2
		[   75.071934] DEBUG sleep_proc2:736: WLOCK_PROC ep=12 count=2
		[   75.071936] DEBUG sleep_proc2:783: nr=11 endp=11 dcid=0 lpid=658 p_cpumask=FFFFFFFF nodemap=1 name=test_sendrec 
		[   75.071937] DEBUG sleep_proc2:785: someone wakeups me: sem=0 p_rcode=0
		[   75.071940] DEBUG new_mini_sendrec:808: WUNLOCK_PROC ep=12 count=2
		[   75.071941] DEBUG new_mini_sendrec:813: WUNLOCK_PROC ep=11 count=2
		[   75.072000] DEBUG 658:SYSC_ipc:163: ipc_getprocinfo: call=3840 first=0 second=11 third=0 fifth=0 
		[   75.072002] DEBUG 658:ipc_getprocinfo:283: dcid=0 p_nr=11
		[   75.072004] DEBUG new_getprocinfo:1938: dcid=0 p_nr=11
		[   75.072007] DEBUG check_caller:533: caller_pid=658 caller_tgid=658
		[   75.072008] DEBUG check_caller:569: WLOCK_PROC ep=11 count=2
		[   75.072009] DEBUG check_caller:599: WUNLOCK_PROC ep=11 count=2
		[   75.072010] DEBUG check_caller:602: dcid=0
		[   75.072012] DEBUG check_caller:606: RLOCK_DC dc=0 count=0
		[   75.072013] DEBUG check_caller:610: RUNLOCK_DC dc=0 count=0
		[   75.072014] DEBUG check_caller:616: caller_pid=658 
		[   75.072016] DEBUG new_getprocinfo:1955: RLOCK_DC dc=0 count=0
		[   75.072017] DEBUG new_getprocinfo:1960: RUNLOCK_DC dc=0 count=0
		[   75.072018] DEBUG new_getprocinfo:1962: RLOCK_PROC ep=11 count=2
		[   75.072019] DEBUG new_getprocinfo:1963: lpid=658 name=test_sendrec
		[   75.072021] DEBUG new_getprocinfo:1965: RUNLOCK_PROC ep=11 count=2

Si cambiamos a:
		root@node0:/usr/src/dvs/dvk-tests# nsenter -p -t$DC0 ./test_sendrec 0 13 53
			DONDE endpoint=53 es SERVER que hace RECEIVE 
			ERROR: test_sendrec.c:main:104: rcode=-102 <<<< EDVSBADCALL
			Producto de verificar si puede realizar el dvkcall RECEIVE 
			if( ! get_sys_bit(caller_ptr->p_priv.priv_usr.priv_dvk_allowed, RECEIVE )){
					ERROR_RUNLOCK_PROC(caller_ptr,EDVSBADCALL);
			} 
			
Si cambiamos a:
		root@node0:/usr/src/dvs/dvk-tests# nsenter -p -t$DC0 ./test_sendrec 0  54 14
			DONDE endpoint=14 es SERVER que hace RECEIVE y endpoint 54 cliente que hace SENDREC 
			[  673.141653] ERROR: 22093:new_mini_sendrec:548: rcode=-102
			if( ! get_sys_bit(caller_ptr->p_priv.priv_usr.priv_dvk_allowed, SENDREC )){
				ERROR_RUNLOCK_PROC(caller_ptr,EDVSBADCALL);
			}	 
	
	Por Default, todo proceso tendra acceso al SYSCALL (SENDREC, GETEP, WAIT4BIND, UNBIND)

	
		Se modifico dvk_debug.h 
				#if defined CONFIG_DVKIPC || defined CONFIG_DVSIOCTL

	
		Cambie en el Linux y en DVS 
			CONFIG_DVS_DVK => CONFIG_DVKIOCTL
		usando https://www.internalpointers.com/post/linux-find-and-replace-text-multiple-files
		
		grep -RiIl 'CONFIG_DVK' | xargs sed -i 's/CONFIG_DVK/CONFIG_DVS_DVK/g'

		grep -RiIl 'CONFIG_DVS_DVK' | xargs sed -i 's/CONFIG_DVS_DVK/CONFIG_DVKIOCTL/g'
		
		grep -RiIl 'DVS_DVK' | xargs sed -i 's/DVS_DVK/DVKIOCTL/g'
		
		PARA ENCONTRAR ARCHIVOS MODIFICADOS EN /usr/src/linux 
		find . -type f -newermt '2020-07-23' | grep -v ".order" | grep -v ".builtin" | grep -v ".mod" | grep -v ".cmd" | grep -v ".o"

		Se implementaron control de privilegios de PROXIES 
			get2rmt equivalente a RECEIVE
			put2lcl equivalente a SEND 
			
		Luego cuando se tiene un Mensaje a entregar por el PROXY_RECEIVER a traves de put2lcl 
			Se deben controlar los permisos del endpoint emisor y receptor.
			
		En el proxy sender no deberia haber problemas porque ya el IPC controla eso.

 
		------------------------------------------------------------------------------------------------	
		COMPILE EL KERNEL SIN CONFIG_DVKIPC Y LUEGO COMPILE EL MODULO 
		RECOMPILE TODOS LOS PROGRAMAS PARA QUE USEN LA LIBRERIA DE IOCTL
		EL MODULO CARGA 
			root@node0:/usr/src/dvs/dvk-tests# dmesg
			root@node0:/usr/src/dvs/dvk-tests# lsmod | grep dvk
			dvk                   262144  0

		PERO NO ESTAN RESUELTAS LAS DVK CALLS 
			root@node0:/usr/src/dvs/dvk-tests# ./test_dvs_info 
			DEBUG 697:dvk_open:102: 
			Get DVS info
			DEBUG 697:dvk_getdvsinfo:248: 
			DEBUG 697:dvk_getdvsinfo:252: ipc ret=-1
			ERROR: 697:dvk_getdvsinfo:253: rcode=-38
			ERROR: 697:dvk_getdvsinfo:264: rcode=-38
			local node ID -38... 
			d_name= d_nr_dcs=0 d_nr_nodes=0 d_nr_procs=0 d_nr_tasks=0 d_nr_sysprocs=0 
			d_max_copybuf=0 d_max_copylen=0
			d_dbglvl=0 version=0 flags=0 sizeof(proc)=0


		grep -RiIl 'CONFIG_DVKIOCTLIPC' | xargs sed -i 's/CONFIG_DVKIOCTLIPC/CONFIG_DVKIPC/g'

		FUNCIONARON BIEN LAS PRUEBAS LOCALES!!!!!
		
		ATENCION:
			No olvidar de recompilar dvk-lib 
			No olvidar de modificar los Makefile de todos los programas 
				dvk-test 
				dvk-loops
				dvk-proxies
				dvs-apps/dc_init 
		
===============================================================================================================
20200726:
		Se modificarone errores de dvk_utils al inicializar los proxies referentes a los privilegios.
		
		Se creo el utilitario test_priv_info para imprimir los privilegios de un proceso 

===============================================================================================================
20200727 :
		Agregue utilitario test_set_priv  
		usage: ./test_set_priv 
				[-w warn_ep] [-l level] [-I ipc_to] [-N ipc_not] [-A Allowed] [-D Deny] -d dcid -p p_nr

		Para probar se bindea un proceso PRIVILEGIADO (6)
			root@node0:/usr/src/dvs/dvk-tests# nsenter -p -t$DC0 ./test_bind 0 5

		y el resultado es 
			root@node0:/usr/src/dvs/dvk-tests# nsenter -p -t$DC0 ./test_set_priv -D put2lcl -d 0 -p 5
			DEBUG 5:dvk_open:105: Open dvk device file /dev/dvk
			DEBUG 5:dvk_getdvsinfo:246: 
			DEBUG 5:dvk_getdvsinfo:255: ioctl ret=0 errno=0
			DEBUG 5:dvk_getdvsinfo:260: ioctl ret=0
			d_name=TEST_CLUSTER d_nr_dcs=32 d_nr_nodes=32 d_nr_procs=221 d_nr_tasks=35 d_nr_sysprocs=64 
			local_nodeid=0
			deny_dvk=20
			dcid=0
			DEBUG 5:dvk_getdcinfo:347: dcid=0
			DEBUG 5:dvk_getdcinfo:359: ioctl ret=0 errno=0
			DEBUG 5:dvk_getdcinfo:364: ioctl ret=0
			dc_dcid=0 dc_nr_procs=221 dc_nr_tasks=34 dc_nr_sysprocs=64 dc_nr_nodes=32
			flags=0 dc_nodes=3 dc_pid=827 dc_name=DC0
			dc_dcid=0 dc_warn2proc=27342 dc_warnmsg=-1
			DEBUG 5:dvk_getprocinfo:1154: dcid=0 p_nr=5 
			DEBUG 5:dvk_getprocinfo:1167: ioctl ret=0 errno=0
			DEBUG 5:dvk_getprocinfo:1172: ioctl ret=0
			nr=5 endp=5 dcid=0 flags=0 misc=20 lpid=865 vpid=2 nodeid=0 name=test_bind 
			endp=5 dcid=0 flags=0 p_getfrom=27342 p_sendto=27342 p_waitmigr=27342 p_waitunbind=27342 p_proxy=27342
			nr=5 endp=5 dcid=0 p_lclsent=0 p_rmtsent=0 p_lclcopy=0 p_rmtcopy=0 
			DEBUG 5:dvk_getpriv:1037: dcid=0 endpoint=5 
			DEBUG 5:dvk_getpriv:1050: ioctl ret=0 errno=0
			DEBUG 5:dvk_getpriv:1055: ioctl ret=0
			sizeof(priv_usr_t)=52
			BEFORE priv_id=39 priv_warn=27342 priv_level=0
			BEFORE 
			NR_DVK_CHUNKS=3
			BITCHUNK_BITS=16

			FFFF:[void0(0)]->[dc_init(1)]->[mini_send(2)]->[mini_receive(3)]->[mini_notify(4)]->[mini_sendrec(5)]->[mini_rcvrqst(6)]->[mini_reply(7)]->[dc_end(8)]->[bind(9)]->[unbind(10)]->[getpriv(11)]->[setpriv(12)]->[vcopy(13)]->[getdcinfo(14)]->[getprocinfo(15)]->
			FFFF:[mini_relay(16)]->[proxies_bind(17)]->[proxies_unbind(18)]->[getnodeinfo(19)]->[put2lcl(20)]->[get2rmt(21)]->[add_node(22)]->[del_node(23)]->[dvs_init(24)]->[dvs_end(25)]->[getep(26)]->[getdvsinfo(27)]->[proxy_conn(28)]->[wait4bind(29)]->[migrate(30)]->[node_up(31)]->
			FFFF:[node_down(32)]->[getproxyinfo(33)]->[wakeup(34)]->
			DEBUG 5:dvk_setpriv:1009: dcid=0 endpoint=5 
			DEBUG 5:dvk_setpriv:1022: ioctl ret=0 errno=0
			DEBUG 5:dvk_setpriv:1027: ioctl ret=0
			DEBUG 5:dvk_getpriv:1037: dcid=0 endpoint=5 
			DEBUG 5:dvk_getpriv:1050: ioctl ret=0 errno=0
			DEBUG 5:dvk_getpriv:1055: ioctl ret=0
			sizeof(priv_usr_t)=52
			AFTER priv_id=39 priv_warn=27342 priv_level=0
			AFTER 
			NR_DVK_CHUNKS=3
			BITCHUNK_BITS=16

			FFFF:[void0(0)]->[dc_init(1)]->[mini_send(2)]->[mini_receive(3)]->[mini_notify(4)]->[mini_sendrec(5)]->[mini_rcvrqst(6)]->[mini_reply(7)]->[dc_end(8)]->[bind(9)]->[unbind(10)]->[getpriv(11)]->[setpriv(12)]->[vcopy(13)]->[getdcinfo(14)]->[getprocinfo(15)]->
			FFEF:[mini_relay(16)]->[proxies_bind(17)]->[proxies_unbind(18)]->[getnodeinfo(19)]->[get2rmt(21)]->[add_node(22)]->[del_node(23)]->[dvs_init(24)]->[dvs_end(25)]->[getep(26)]->[getdvsinfo(27)]->[proxy_conn(28)]->[wait4bind(29)]->[migrate(30)]->[node_up(31)]->
			FFFF:[node_down(32)]->[getproxyinfo(33)]->[wakeup(34)]->

		
SEGUN EL KERN.LOG   
		Jul 27 11:02:31 node0 kernel: [ 1376.037400] DEBUG dvk_ioctl:342: cmd=4004E30C arg=BFC13060
		Jul 27 11:02:31 node0 kernel: [ 1376.037404] DEBUG dvk_ioctl:362: DVK_CALL=12 (io_setpriv) 
		Jul 27 11:02:31 node0 kernel: [ 1376.037405] DEBUG io_setpriv:131: 
		Jul 27 11:02:31 node0 kernel: [ 1376.037409] DEBUG new_setpriv:2457: RLOCK_DC dc=0 count=0
		Jul 27 11:02:31 node0 kernel: [ 1376.037410] DEBUG new_setpriv:2462: dcid=0 proc_nr=5 proc_ep=5
		Jul 27 11:02:31 node0 kernel: [ 1376.037412] DEBUG new_setpriv:2470: WLOCK_PROC ep=5 count=0
		Jul 27 11:02:31 node0 kernel: [ 1376.037415] DEBUG new_setpriv:2474: priv_id=39 priv_warn=27342 priv_level=0
		Jul 27 11:02:31 node0 kernel: [ 1376.037417] DEBUG new_setpriv:2475: PRINT_DVKALLOWED_MAP: 870:new_setpriv:2475:proc_ptr->p_priv.priv_usr.priv_dvk_allowed:
		Jul 27 11:02:31 node0 kernel: [ 1376.037419] DEBUG new_setpriv:2475: PRINT_DVKALLOWED_MAP: 870:new_setpriv:2475:3:
		Jul 27 11:02:31 node0 kernel: [ 1376.037420] DEBUG new_setpriv:2475: 
		Jul 27 11:02:31 node0 kernel: [ 1376.037420] FFFF:
		Jul 27 11:02:31 node0 kernel: [ 1376.037421] DEBUG new_setpriv:2475: 
		Jul 27 11:02:31 node0 kernel: [ 1376.037421] FFEF: <<<<<<<<<<<<<<<<<<<<<<<<<<<<< FFEF: 1111111111101111
		Jul 27 11:02:31 node0 kernel: [ 1376.037422] DEBUG new_setpriv:2475: 
		Jul 27 11:02:31 node0 kernel: [ 1376.037422] FFFF:
		Jul 27 11:02:31 node0 kernel: [ 1376.037423] DEBUG new_setpriv:2475: 
		Jul 27 11:02:31 node0 kernel: [ 1376.037424] DEBUG new_setpriv:2476: PRINT_SYS_MAP: 870:new_setpriv:2476:proc_ptr->p_priv.priv_usr.priv_ipc_to:
		Jul 27 11:02:31 node0 kernel: [ 1376.037426] DEBUG new_setpriv:2476: PRINT_SYS_MAP: 870:new_setpriv:2476:4:
		Jul 27 11:02:31 node0 kernel: [ 1376.037427] DEBUG new_setpriv:2476: 
		Jul 27 11:02:31 node0 kernel: [ 1376.037427] FFFF:
		Jul 27 11:02:31 node0 kernel: [ 1376.037428] DEBUG new_setpriv:2476: 
		Jul 27 11:02:31 node0 kernel: [ 1376.037428] FFFF:
		Jul 27 11:02:31 node0 kernel: [ 1376.037429] DEBUG new_setpriv:2476: 
		Jul 27 11:02:31 node0 kernel: [ 1376.037429] FFFF:
		Jul 27 11:02:31 node0 kernel: [ 1376.037430] DEBUG new_setpriv:2476: 
		Jul 27 11:02:31 node0 kernel: [ 1376.037430] FFFF:
		Jul 27 11:02:31 node0 kernel: [ 1376.037431] DEBUG new_setpriv:2476: 
		Jul 27 11:02:31 node0 kernel: [ 1376.037432] DEBUG new_setpriv:2477: WUNLOCK_PROC ep=5 count=0
		Jul 27 11:02:31 node0 kernel: [ 1376.037433] DEBUG new_setpriv:2478: RUNLOCK_DC dc=0 count=0	


OTRA PRUEBA:  QUITAR PERMISOS PARA IPC AL PROCESO (-34)
			root@node0:/usr/src/dvs/dvk-tests# nsenter -p -t$DC0 ./test_set_priv -N -34  -d 0 -p 5
			DEBUG 32:dvk_open:105: Open dvk device file /dev/dvk
			DEBUG 32:dvk_getdvsinfo:246: 
			DEBUG 32:dvk_getdvsinfo:255: ioctl ret=0 errno=0
			DEBUG 32:dvk_getdvsinfo:260: ioctl ret=0
			d_name=TEST_CLUSTER d_nr_dcs=32 d_nr_nodes=32 d_nr_procs=221 d_nr_tasks=35 d_nr_sysprocs=64 
			local_nodeid=0
			dcid=0
			DEBUG 32:dvk_getdcinfo:347: dcid=0
			DEBUG 32:dvk_getdcinfo:359: ioctl ret=0 errno=0
			DEBUG 32:dvk_getdcinfo:364: ioctl ret=0
			dc_dcid=0 dc_nr_procs=221 dc_nr_tasks=34 dc_nr_sysprocs=64 dc_nr_nodes=32
			flags=0 dc_nodes=3 dc_pid=827 dc_name=DC0
			dc_dcid=0 dc_warn2proc=27342 dc_warnmsg=-1
			DEBUG 32:dvk_getprocinfo:1154: dcid=0 p_nr=5 
			DEBUG 32:dvk_getprocinfo:1167: ioctl ret=0 errno=0
			DEBUG 32:dvk_getprocinfo:1172: ioctl ret=0
			nr=5 endp=5 dcid=0 flags=0 misc=20 lpid=952 vpid=29 nodeid=0 name=test_bind 
			endp=5 dcid=0 flags=0 p_getfrom=27342 p_sendto=27342 p_waitmigr=27342 p_waitunbind=27342 p_proxy=27342
			nr=5 endp=5 dcid=0 p_lclsent=0 p_rmtsent=0 p_lclcopy=0 p_rmtcopy=0 
			DEBUG 32:dvk_getpriv:1037: dcid=0 endpoint=5 
			DEBUG 32:dvk_getpriv:1050: ioctl ret=0 errno=0
			DEBUG 32:dvk_getpriv:1055: ioctl ret=0
			sizeof(priv_usr_t)=52
			BEFORE priv_id=39 priv_warn=27342 priv_level=0
			BEFORE 
			NR_DVK_CHUNKS=3
			BITCHUNK_BITS=16

			FFFF:[void0(0)]->[dc_init(1)]->[send(2)]->[receive(3)]->[notify(4)]->[sendrec(5)]->[rcvrqst(6)]->[reply(7)]->[dc_end(8)]->[bind(9)]->[unbind(10)]->[getpriv(11)]->[setpriv(12)]->[vcopy(13)]->[getdcinfo(14)]->[getprocinfo(15)]->
			FFFF:[mini_relay(16)]->[proxies_bind(17)]->[proxies_unbind(18)]->[getnodeinfo(19)]->[put2lcl(20)]->[get2rmt(21)]->[add_node(22)]->[del_node(23)]->[dvs_init(24)]->[dvs_end(25)]->[getep(26)]->[getdvsinfo(27)]->[proxy_conn(28)]->[wait4bind(29)]->[migrate(30)]->[node_up(31)]->
			FFFF:[node_down(32)]->[getproxyinfo(33)]->[wakeup(34)]->
			NR_SYS_CHUNKS=4
			BITCHUNK_BITS=16

			FFFF:
			FFFF:
			FFFF:
			FFFF:
			DEBUG 32:dvk_setpriv:1009: dcid=0 endpoint=5 
			DEBUG 32:dvk_setpriv:1022: ioctl ret=0 errno=0
			DEBUG 32:dvk_setpriv:1027: ioctl ret=0
			DEBUG 32:dvk_getpriv:1037: dcid=0 endpoint=5 
			DEBUG 32:dvk_getpriv:1050: ioctl ret=0 errno=0
			DEBUG 32:dvk_getpriv:1055: ioctl ret=0
			sizeof(priv_usr_t)=52
			AFTER priv_id=39 priv_warn=27342 priv_level=0
			AFTER 
			NR_DVK_CHUNKS=3
			BITCHUNK_BITS=16

			FFFF:[void0(0)]->[dc_init(1)]->[send(2)]->[receive(3)]->[notify(4)]->[sendrec(5)]->[rcvrqst(6)]->[reply(7)]->[dc_end(8)]->[bind(9)]->[unbind(10)]->[getpriv(11)]->[setpriv(12)]->[vcopy(13)]->[getdcinfo(14)]->[getprocinfo(15)]->
			FFFF:[mini_relay(16)]->[proxies_bind(17)]->[proxies_unbind(18)]->[getnodeinfo(19)]->[put2lcl(20)]->[get2rmt(21)]->[add_node(22)]->[del_node(23)]->[dvs_init(24)]->[dvs_end(25)]->[getep(26)]->[getdvsinfo(27)]->[proxy_conn(28)]->[wait4bind(29)]->[migrate(30)]->[node_up(31)]->
			FFFF:[node_down(32)]->[getproxyinfo(33)]->[wakeup(34)]->
			NR_SYS_CHUNKS=4
			BITCHUNK_BITS=16

			FFFE: <<<<<<<<<<<<<<<<<< AQUI MODIFICO 
			FFFF:
			FFFF:
			FFFF:

OTRA PRUEBA:  VOLVER A DAR PERMISOS PARA IPC AL PROCESO (-34)

			root@node0:/usr/src/dvs/dvk-tests# nsenter -p -t$DC0 ./test_set_priv -I -34  -d 0 -p 5
			DEBUG 33:dvk_open:105: Open dvk device file /dev/dvk
			DEBUG 33:dvk_getdvsinfo:246: 
			DEBUG 33:dvk_getdvsinfo:255: ioctl ret=0 errno=0
			DEBUG 33:dvk_getdvsinfo:260: ioctl ret=0
			d_name=TEST_CLUSTER d_nr_dcs=32 d_nr_nodes=32 d_nr_procs=221 d_nr_tasks=35 d_nr_sysprocs=64 
			local_nodeid=0
			dcid=0
			DEBUG 33:dvk_getdcinfo:347: dcid=0
			DEBUG 33:dvk_getdcinfo:359: ioctl ret=0 errno=0
			DEBUG 33:dvk_getdcinfo:364: ioctl ret=0
			dc_dcid=0 dc_nr_procs=221 dc_nr_tasks=34 dc_nr_sysprocs=64 dc_nr_nodes=32
			flags=0 dc_nodes=3 dc_pid=827 dc_name=DC0
			dc_dcid=0 dc_warn2proc=27342 dc_warnmsg=-1
			DEBUG 33:dvk_getprocinfo:1154: dcid=0 p_nr=5 
			DEBUG 33:dvk_getprocinfo:1167: ioctl ret=0 errno=0
			DEBUG 33:dvk_getprocinfo:1172: ioctl ret=0
			nr=5 endp=5 dcid=0 flags=0 misc=20 lpid=952 vpid=29 nodeid=0 name=test_bind 
			endp=5 dcid=0 flags=0 p_getfrom=27342 p_sendto=27342 p_waitmigr=27342 p_waitunbind=27342 p_proxy=27342
			nr=5 endp=5 dcid=0 p_lclsent=0 p_rmtsent=0 p_lclcopy=0 p_rmtcopy=0 
			DEBUG 33:dvk_getpriv:1037: dcid=0 endpoint=5 
			DEBUG 33:dvk_getpriv:1050: ioctl ret=0 errno=0
			DEBUG 33:dvk_getpriv:1055: ioctl ret=0
			sizeof(priv_usr_t)=52
			BEFORE priv_id=39 priv_warn=27342 priv_level=0
			BEFORE 
			NR_DVK_CHUNKS=3
			BITCHUNK_BITS=16

			FFFF:[void0(0)]->[dc_init(1)]->[send(2)]->[receive(3)]->[notify(4)]->[sendrec(5)]->[rcvrqst(6)]->[reply(7)]->[dc_end(8)]->[bind(9)]->[unbind(10)]->[getpriv(11)]->[setpriv(12)]->[vcopy(13)]->[getdcinfo(14)]->[getprocinfo(15)]->
			FFFF:[mini_relay(16)]->[proxies_bind(17)]->[proxies_unbind(18)]->[getnodeinfo(19)]->[put2lcl(20)]->[get2rmt(21)]->[add_node(22)]->[del_node(23)]->[dvs_init(24)]->[dvs_end(25)]->[getep(26)]->[getdvsinfo(27)]->[proxy_conn(28)]->[wait4bind(29)]->[migrate(30)]->[node_up(31)]->
			FFFF:[node_down(32)]->[getproxyinfo(33)]->[wakeup(34)]->
			NR_SYS_CHUNKS=4
			BITCHUNK_BITS=16

			FFFE: <<<<<<<<<<<<<<<<<<<< ESTADO ANTERIOR
			FFFF:
			FFFF:
			FFFF:
			DEBUG 33:dvk_setpriv:1009: dcid=0 endpoint=5 
			DEBUG 33:dvk_setpriv:1022: ioctl ret=0 errno=0
			DEBUG 33:dvk_setpriv:1027: ioctl ret=0
			DEBUG 33:dvk_getpriv:1037: dcid=0 endpoint=5 
			DEBUG 33:dvk_getpriv:1050: ioctl ret=0 errno=0
			DEBUG 33:dvk_getpriv:1055: ioctl ret=0
			sizeof(priv_usr_t)=52
			AFTER priv_id=39 priv_warn=27342 priv_level=0
			AFTER 
			NR_DVK_CHUNKS=3
			BITCHUNK_BITS=16

			FFFF:[void0(0)]->[dc_init(1)]->[send(2)]->[receive(3)]->[notify(4)]->[sendrec(5)]->[rcvrqst(6)]->[reply(7)]->[dc_end(8)]->[bind(9)]->[unbind(10)]->[getpriv(11)]->[setpriv(12)]->[vcopy(13)]->[getdcinfo(14)]->[getprocinfo(15)]->
			FFFF:[mini_relay(16)]->[proxies_bind(17)]->[proxies_unbind(18)]->[getnodeinfo(19)]->[put2lcl(20)]->[get2rmt(21)]->[add_node(22)]->[del_node(23)]->[dvs_init(24)]->[dvs_end(25)]->[getep(26)]->[getdvsinfo(27)]->[proxy_conn(28)]->[wait4bind(29)]->[migrate(30)]->[node_up(31)]->
			FFFF:[node_down(32)]->[getproxyinfo(33)]->[wakeup(34)]->
			NR_SYS_CHUNKS=4
			BITCHUNK_BITS=16

			FFFF: <<<<<<<<<<<<<<<<<<< ESTADO NUEVO 
			FFFF:
			FFFF:
			FFFF:

OTRA PRUEBA: CAMBIAR EL WARN ENDPOINT Y EL LEVEL 
			root@node0:/usr/src/dvs/dvk-tests# nsenter -p -t$DC0 ./test_set_priv -w -33 -l 3  -d 0 -p 5
			DEBUG 37:dvk_open:105: Open dvk device file /dev/dvk
			DEBUG 37:dvk_getdvsinfo:246: 
			DEBUG 37:dvk_getdvsinfo:255: ioctl ret=0 errno=0
			DEBUG 37:dvk_getdvsinfo:260: ioctl ret=0
			d_name=TEST_CLUSTER d_nr_dcs=32 d_nr_nodes=32 d_nr_procs=221 d_nr_tasks=35 d_nr_sysprocs=64 
			local_nodeid=0
			dcid=0
			DEBUG 37:dvk_getdcinfo:347: dcid=0
			DEBUG 37:dvk_getdcinfo:359: ioctl ret=0 errno=0
			DEBUG 37:dvk_getdcinfo:364: ioctl ret=0
			dc_dcid=0 dc_nr_procs=221 dc_nr_tasks=34 dc_nr_sysprocs=64 dc_nr_nodes=32
			flags=0 dc_nodes=3 dc_pid=827 dc_name=DC0
			dc_dcid=0 dc_warn2proc=27342 dc_warnmsg=-1
			DEBUG 37:dvk_getprocinfo:1154: dcid=0 p_nr=5 
			DEBUG 37:dvk_getprocinfo:1167: ioctl ret=0 errno=0
			DEBUG 37:dvk_getprocinfo:1172: ioctl ret=0
			nr=5 endp=5 dcid=0 flags=0 misc=20 lpid=971 vpid=34 nodeid=0 name=test_bind 
			endp=5 dcid=0 flags=0 p_getfrom=27342 p_sendto=27342 p_waitmigr=27342 p_waitunbind=27342 p_proxy=27342
			nr=5 endp=5 dcid=0 p_lclsent=0 p_rmtsent=0 p_lclcopy=0 p_rmtcopy=0 
			DEBUG 37:dvk_getpriv:1037: dcid=0 endpoint=5 
			DEBUG 37:dvk_getpriv:1050: ioctl ret=0 errno=0
			DEBUG 37:dvk_getpriv:1055: ioctl ret=0
			sizeof(priv_usr_t)=52
			BEFORE priv_id=39 priv_warn=27342 priv_level=0 <<<<<<<<<<<<<<<<<<<<<<<<< ORIGINAL 
			BEFORE 
			NR_DVK_CHUNKS=3
			BITCHUNK_BITS=16

			FFFF:[void0(0)]->[dc_init(1)]->[send(2)]->[receive(3)]->[notify(4)]->[sendrec(5)]->[rcvrqst(6)]->[reply(7)]->[dc_end(8)]->[bind(9)]->[unbind(10)]->[getpriv(11)]->[setpriv(12)]->[vcopy(13)]->[getdcinfo(14)]->[getprocinfo(15)]->
			FFFF:[mini_relay(16)]->[proxies_bind(17)]->[proxies_unbind(18)]->[getnodeinfo(19)]->[put2lcl(20)]->[get2rmt(21)]->[add_node(22)]->[del_node(23)]->[dvs_init(24)]->[dvs_end(25)]->[getep(26)]->[getdvsinfo(27)]->[proxy_conn(28)]->[wait4bind(29)]->[migrate(30)]->[node_up(31)]->
			FFFF:[node_down(32)]->[getproxyinfo(33)]->[wakeup(34)]->
			NR_SYS_CHUNKS=4
			BITCHUNK_BITS=16

			FFFF:
			FFFF:
			FFFF:
			FFFF:
			DEBUG 37:dvk_setpriv:1009: dcid=0 endpoint=5 
			DEBUG 37:dvk_setpriv:1022: ioctl ret=0 errno=0
			DEBUG 37:dvk_setpriv:1027: ioctl ret=0
			DEBUG 37:dvk_getpriv:1037: dcid=0 endpoint=5 
			DEBUG 37:dvk_getpriv:1050: ioctl ret=0 errno=0
			DEBUG 37:dvk_getpriv:1055: ioctl ret=0
			sizeof(priv_usr_t)=52 
			AFTER priv_id=39 priv_warn=-33 priv_level=3  <<<<<<<<<<<<<<<<<<<<<<<<< MODIFICADO 
			AFTER 
			NR_DVK_CHUNKS=3
			BITCHUNK_BITS=16

			FFFF:[void0(0)]->[dc_init(1)]->[send(2)]->[receive(3)]->[notify(4)]->[sendrec(5)]->[rcvrqst(6)]->[reply(7)]->[dc_end(8)]->[bind(9)]->[unbind(10)]->[getpriv(11)]->[setpriv(12)]->[vcopy(13)]->[getdcinfo(14)]->[getprocinfo(15)]->
			FFFF:[mini_relay(16)]->[proxies_bind(17)]->[proxies_unbind(18)]->[getnodeinfo(19)]->[put2lcl(20)]->[get2rmt(21)]->[add_node(22)]->[del_node(23)]->[dvs_init(24)]->[dvs_end(25)]->[getep(26)]->[getdvsinfo(27)]->[proxy_conn(28)]->[wait4bind(29)]->[migrate(30)]->[node_up(31)]->
			FFFF:[node_down(32)]->[getproxyinfo(33)]->[wakeup(34)]->
			NR_SYS_CHUNKS=4
			BITCHUNK_BITS=16

			FFFF:
			FFFF:
			FFFF:
			FFFF:


	dvk_hyper.c:  controle los parametros que pasa el dvk_setpriv 

	PRUEBA DE CAMBIAR 
			root@node0:/usr/src/dvs/dvk-tests# nsenter -p -t$DC0 ./test_set_priv -w -33 -l 3  -d 0 -p 5
			DEBUG 5:dvk_open:105: Open dvk device file /dev/dvk
			DEBUG 5:dvk_getdvsinfo:246: 
			DEBUG 5:dvk_getdvsinfo:255: ioctl ret=0 errno=0
			DEBUG 5:dvk_getdvsinfo:260: ioctl ret=0
			d_name=TEST_CLUSTER d_nr_dcs=32 d_nr_nodes=32 d_nr_procs=221 d_nr_tasks=35 d_nr_sysprocs=64 
			local_nodeid=0
			dcid=0
			DEBUG 5:dvk_getdcinfo:347: dcid=0
			DEBUG 5:dvk_getdcinfo:359: ioctl ret=0 errno=0
			DEBUG 5:dvk_getdcinfo:364: ioctl ret=0
			dc_dcid=0 dc_nr_procs=221 dc_nr_tasks=34 dc_nr_sysprocs=64 dc_nr_nodes=32
			flags=0 dc_nodes=3 dc_pid=658 dc_name=DC0
			dc_dcid=0 dc_warn2proc=27342 dc_warnmsg=-1
			DEBUG 5:dvk_getprocinfo:1154: dcid=0 p_nr=5 
			DEBUG 5:dvk_getprocinfo:1167: ioctl ret=0 errno=0
			DEBUG 5:dvk_getprocinfo:1172: ioctl ret=0
			nr=5 endp=5 dcid=0 flags=0 misc=20 lpid=695 vpid=2 nodeid=0 name=test_bind 
			endp=5 dcid=0 flags=0 p_getfrom=27342 p_sendto=27342 p_waitmigr=27342 p_waitunbind=27342 p_proxy=27342
			nr=5 endp=5 dcid=0 p_lclsent=0 p_rmtsent=0 p_lclcopy=0 p_rmtcopy=0 
			DEBUG 5:dvk_getpriv:1037: dcid=0 endpoint=5 
			DEBUG 5:dvk_getpriv:1050: ioctl ret=0 errno=0
			DEBUG 5:dvk_getpriv:1055: ioctl ret=0
			sizeof(priv_usr_t)=52
			BEFORE priv_id=39 priv_warn=27342 priv_level=0 <<<<<<<<<<<<<<<<<<<<<<<<<<< VALORES ORIGINALES
			BEFORE 
			NR_DVK_CHUNKS=3
			BITCHUNK_BITS=16

			FFFF:[void0(0)]->[dc_init(1)]->[send(2)]->[receive(3)]->[notify(4)]->[sendrec(5)]->[rcvrqst(6)]->[reply(7)]->[dc_end(8)]->[bind(9)]->[unbind(10)]->[getpriv(11)]->[setpriv(12)]->[vcopy(13)]->[getdcinfo(14)]->[getprocinfo(15)]->
			FFFF:[mini_relay(16)]->[proxies_bind(17)]->[proxies_unbind(18)]->[getnodeinfo(19)]->[put2lcl(20)]->[get2rmt(21)]->[add_node(22)]->[del_node(23)]->[dvs_init(24)]->[dvs_end(25)]->[getep(26)]->[getdvsinfo(27)]->[proxy_conn(28)]->[wait4bind(29)]->[migrate(30)]->[node_up(31)]->
			FFFF:[node_down(32)]->[getproxyinfo(33)]->[wakeup(34)]->
			NR_SYS_CHUNKS=4
			BITCHUNK_BITS=16

			FFFF:
			FFFF:
			FFFF:
			FFFF:
			DEBUG 5:dvk_setpriv:1009: dcid=0 endpoint=5 
			DEBUG 5:dvk_setpriv:1022: ioctl ret=0 errno=0
			DEBUG 5:dvk_setpriv:1027: ioctl ret=0
			DEBUG 5:dvk_getpriv:1037: dcid=0 endpoint=5 
			DEBUG 5:dvk_getpriv:1050: ioctl ret=0 errno=0
			DEBUG 5:dvk_getpriv:1055: ioctl ret=0
			sizeof(priv_usr_t)=52
			AFTER priv_id=39 priv_warn=-33 priv_level=3 <<<<<<<<<<<<<<<<<<<<<<<<<<< VALORES NUEVOS
			AFTER 
			NR_DVK_CHUNKS=3
			BITCHUNK_BITS=16

			FFFF:[void0(0)]->[dc_init(1)]->[send(2)]->[receive(3)]->[notify(4)]->[sendrec(5)]->[rcvrqst(6)]->[reply(7)]->[dc_end(8)]->[bind(9)]->[unbind(10)]->[getpriv(11)]->[setpriv(12)]->[vcopy(13)]->[getdcinfo(14)]->[getprocinfo(15)]->
			FFFF:[mini_relay(16)]->[proxies_bind(17)]->[proxies_unbind(18)]->[getnodeinfo(19)]->[put2lcl(20)]->[get2rmt(21)]->[add_node(22)]->[del_node(23)]->[dvs_init(24)]->[dvs_end(25)]->[getep(26)]->[getdvsinfo(27)]->[proxy_conn(28)]->[wait4bind(29)]->[migrate(30)]->[node_up(31)]->
			FFFF:[node_down(32)]->[getproxyinfo(33)]->[wakeup(34)]->
			NR_SYS_CHUNKS=4
			BITCHUNK_BITS=16

			FFFF:
			FFFF:
			FFFF:
			FFFF:

		PROVOCANDO ERRORES 
			root@node0:/usr/src/dvs/dvk-tests# nsenter -p -t$DC0 ./test_set_priv -w -55 -l 3  -d 0 -p 5 <<<< INVALID warn_ep
			DEBUG 17:dvk_open:105: Open dvk device file /dev/dvk
			DEBUG 17:dvk_getdvsinfo:246: 
			DEBUG 17:dvk_getdvsinfo:255: ioctl ret=0 errno=0
			DEBUG 17:dvk_getdvsinfo:260: ioctl ret=0
			d_name=TEST_CLUSTER d_nr_dcs=32 d_nr_nodes=32 d_nr_procs=221 d_nr_tasks=35 d_nr_sysprocs=64 
			local_nodeid=0
			Invalid warn_ep [-34-28]
			root@node0:/usr/src/dvs/dvk-tests# make
			gcc  -MMD -MP -ldl -lm -lrt -lnsl -pthread -rdynamic -o test_set_priv test_set_priv.c  ../dvk-lib//stub_dvkcall.o -I..
			
			root@node0:/usr/src/dvs/dvk-tests# nsenter -p -t$DC0 ./test_set_priv -w -55 -l 3  -d 0 -p 5 <<<<< INVALID level 
			DEBUG 21:dvk_open:105: Open dvk device file /dev/dvk
			DEBUG 21:dvk_getdvsinfo:246: 
			DEBUG 21:dvk_getdvsinfo:255: ioctl ret=0 errno=0
			DEBUG 21:dvk_getdvsinfo:260: ioctl ret=0
			d_name=TEST_CLUSTER d_nr_dcs=32 d_nr_nodes=32 d_nr_procs=221 d_nr_tasks=35 d_nr_sysprocs=64 
			local_nodeid=0
			Invalid warn_ep [-34,28]
			root@node0:/usr/src/dvs/dvk-tests# nsenter -p -t$DC0 ./test_set_priv -w -5 -l 33  -d 0 -p 5
			DEBUG 22:dvk_open:105: Open dvk device file /dev/dvk
			DEBUG 22:dvk_getdvsinfo:246: 
			DEBUG 22:dvk_getdvsinfo:255: ioctl ret=0 errno=0
			DEBUG 22:dvk_getdvsinfo:260: ioctl ret=0
			d_name=TEST_CLUSTER d_nr_dcs=32 d_nr_nodes=32 d_nr_procs=221 d_nr_tasks=35 d_nr_sysprocs=64 
			local_nodeid=0
			Invalid level [0-4]

===============================================================================================================
20200816:
		Se agregaron a /proc 
			DCx/ipcto
				-nr id --wr- lv 3210987654321098765432109876543210987654321098765432109876543210
				 11 46 27342  0 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
				 80 64 27342  0 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
			DCx/dvkcalls 
				-nr id --wr- lv 765432109876543210987654321098765432109876543210
				 11 46 27342  0 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
				 80 64 27342  0 ------------------X--X---------------X----X-----
			proxies/ipcto
				ID Type 3210987654321098765432109876543210987654321098765432109876543210
				 0 send ----------------------------------------------------------------
				 0 recv ----------------------------------------------------------------
			proxies/dvkcalls 
				ID Type 765432109876543210987654321098765432109876543210
				 0 send --------------------------X--XX-----------------
				 0 recv ---------------------------X-XX-----------------
			
		Que muestran el estado de los privilegios de los procesos 


		Se reprogramo INFORMACION ESTADISTICA AL PROXY VIA WEB 
			El SENDER proxy reporta en el puerto (4000+nodeid)
				SENDER Proxy Web Server .
				---snode--	---dnode--	---dcid---	--nr_msgs-	--nr_data-	--nr_cmd--
						0			1			0			15		655360		25
			El RECEIVER proxy reporta en el puerto (5000+nodeid)
				RECEIVER Proxy Web Server .
				---snode--	---dnode--	---dcid---	--nr_msgs-	--nr_data-	--nr_cmd--
						1			0			0			15			0		40			

		
		
		
======================================================================================================

Aug 18 16:50:08 node0 kernel: [  352.545296] DEBUG 999:SYSC_ipc:165: ipc_mini_sendrec: call=1280 first=1 second=0 third=0 fifth=-1 
Aug 18 16:50:08 node0 kernel: [  352.545297] DEBUG 999:ipc_mini_sendrec:115: srcdst_ep=1 timeout_ms=-1
Aug 18 16:50:08 node0 kernel: [  352.545299] DEBUG 999:new_mini_sendrec:527: srcdst_ep=1
Aug 18 16:50:08 node0 kernel: [  352.545302] DEBUG 999:check_caller:546: caller_pid=999 caller_tgid=999
Aug 18 16:50:08 node0 kernel: [  352.545303] DEBUG 999:check_caller:582: WLOCK_PROC ep=10 count=4
Aug 18 16:50:08 node0 kernel: [  352.545305] DEBUG 999:check_caller:612: WUNLOCK_PROC ep=10 count=4
Aug 18 16:50:08 node0 kernel: [  352.545306] DEBUG 999:check_caller:615: dcid=0
Aug 18 16:50:08 node0 kernel: [  352.545308] DEBUG 999:check_caller:619: RLOCK_DC dc=0 count=0
Aug 18 16:50:08 node0 kernel: [  352.545309] DEBUG 999:check_caller:623: RUNLOCK_DC dc=0 count=0
Aug 18 16:50:08 node0 kernel: [  352.545311] DEBUG 999:check_caller:629: caller_pid=999 
Aug 18 16:50:08 node0 kernel: [  352.545312] DEBUG 999:new_mini_sendrec:538: RLOCK_PROC ep=10 count=4
Aug 18 16:50:08 node0 kernel: [  352.545314] DEBUG 999:new_mini_sendrec:543: caller_nr=10 caller_ep=10 srcdst_ep=1 
Aug 18 16:50:08 node0 kernel: [  352.545316] DEBUG 999:new_mini_sendrec:550: RUNLOCK_PROC ep=10 count=4
Aug 18 16:50:08 node0 kernel: [  352.545317] DEBUG 999:new_mini_sendrec:552: dcid=0
Aug 18 16:50:08 node0 kernel: [  352.545319] DEBUG 999:new_mini_sendrec:556: RLOCK_DC dc=0 count=0
Aug 18 16:50:08 node0 kernel: [  352.545320] DEBUG 999:new_mini_sendrec:560: RUNLOCK_DC dc=0 count=0
Aug 18 16:50:08 node0 kernel: [  352.545322] DEBUG 999:new_mini_sendrec:575: RLOCK_PROC ep=10 count=4
Aug 18 16:50:08 node0 kernel: [  352.545324] DEBUG 999:new_mini_sendrec:586: RUNLOCK_PROC ep=10 count=4
Aug 18 16:50:08 node0 kernel: [  352.545325] DEBUG 999:new_mini_sendrec:592: WUNLOCK_PROC ep=10 count=5
Aug 18 16:50:08 node0 kernel: [  352.545327] DEBUG 999:new_mini_sendrec:592: WLOCK_PROC ep=1 count=3
Aug 18 16:50:08 node0 kernel: [  352.545328] DEBUG 999:new_mini_sendrec:592: WLOCK_PROC ep=10 count=5
Aug 18 16:50:08 node0 kernel: [  352.545329] DEBUG 999:new_mini_sendrec:594: srcdst_nr=1 srcdst_ep=1
Aug 18 16:50:08 node0 kernel: [  352.545331] DEBUG 999:new_mini_sendrec:614: srcdst_ptr->p_usr.p_nodeid=0
Aug 18 16:50:08 node0 kernel: [  352.545332] DEBUG 999:new_mini_sendrec:618: RLOCK_DC dc=0 count=0
Aug 18 16:50:08 node0 kernel: [  352.545334] DEBUG 999:new_mini_sendrec:622: RUNLOCK_DC dc=0 count=0
Aug 18 16:50:08 node0 kernel: [  352.545336] DEBUG 999:new_mini_sendrec:637: dcid=0 caller_pid=999 caller_nr=10 srcdst_ep=1 
Aug 18 16:50:08 node0 kernel: [  352.545337] DEBUG 999:new_mini_sendrec:642: SENDING HALF
Aug 18 16:50:08 node0 kernel: [  352.545338] DEBUG 999:new_mini_sendrec:775: destination is not waiting to receive srcdst_ptr-flags=0. Enqueue at TAIL.
Aug 18 16:50:08 node0 kernel: [  352.545341] DEBUG 999:sleep_proc2:731: BEFORE DOWN lpid=999 p_sem=0 timeout=-1
Aug 18 16:50:08 node0 kernel: [  352.545342] DEBUG 999:sleep_proc2:733: endpoint=10 flags=C
Aug 18 16:50:08 node0 kernel: [  352.545344] DEBUG 999:sleep_proc2:737: WUNLOCK_PROC ep=10 count=5
Aug 18 16:50:08 node0 kernel: [  352.545592] DEBUG 999:sleep_proc2:737: WUNLOCK_PROC ep=1 count=3
Aug 18 16:50:08 node0 kernel: [  352.545632] DEBUG 999:sleep_proc2:738: endpoint=10 flags=C

Aug 18 16:50:08 node0 kernel: [  352.546320] DEBUG 644:SYSC_ipc:165: ipc_mini_send: call=512 first=10 second=0 third=0 fifth=30000 
Aug 18 16:50:08 node0 kernel: [  352.546323] DEBUG 644:ipc_mini_send:61: dst_ep=10 timeout_ms=30000
Aug 18 16:50:08 node0 kernel: [  352.546325] DEBUG 644:new_mini_send:32: dst_ep=10
Aug 18 16:50:08 node0 kernel: [  352.546327] DEBUG 644:check_caller:546: caller_pid=644 caller_tgid=644
Aug 18 16:50:08 node0 kernel: [  352.546329] DEBUG 644:check_caller:582: WLOCK_PROC ep=1 count=3
Aug 18 16:50:08 node0 kernel: [  352.546330] DEBUG 644:check_caller:612: WUNLOCK_PROC ep=1 count=3
Aug 18 16:50:08 node0 kernel: [  352.546331] DEBUG 644:check_caller:615: dcid=0
Aug 18 16:50:08 node0 kernel: [  352.546333] DEBUG 644:check_caller:619: RLOCK_DC dc=0 count=0
Aug 18 16:50:08 node0 kernel: [  352.546335] DEBUG 644:check_caller:623: RUNLOCK_DC dc=0 count=0
Aug 18 16:50:08 node0 kernel: [  352.546336] DEBUG 644:check_caller:629: caller_pid=644 
Aug 18 16:50:08 node0 kernel: [  352.546338] DEBUG 644:new_mini_send:44: RLOCK_PROC ep=1 count=3
Aug 18 16:50:08 node0 kernel: [  352.546339] DEBUG 644:new_mini_send:48: caller_nr=1 caller_ep=1 dst_ep=10 
Aug 18 16:50:08 node0 kernel: [  352.546340] DEBUG 644:new_mini_send:53: RUNLOCK_PROC ep=1 count=3
Aug 18 16:50:08 node0 kernel: [  352.546342] DEBUG 644:new_mini_send:55: dcid=0
Aug 18 16:50:08 node0 kernel: [  352.546343] DEBUG 644:new_mini_send:59: RLOCK_DC dc=0 count=0
Aug 18 16:50:08 node0 kernel: [  352.546344] DEBUG 644:new_mini_send:64: RUNLOCK_DC dc=0 count=0
Aug 18 16:50:08 node0 kernel: [  352.546346] DEBUG 644:new_mini_send:79: RLOCK_PROC ep=1 count=3
Aug 18 16:50:08 node0 kernel: [  352.546347] DEBUG 644:new_mini_send:90: RUNLOCK_PROC ep=1 count=3
Aug 18 16:50:08 node0 kernel: [  352.546349] DEBUG 644:new_mini_send:93: WLOCK_PROC ep=10 count=5
Aug 18 16:50:08 node0 kernel: [  352.546350] DEBUG 644:new_mini_send:98: dst_nr=10 dst_ep=10
Aug 18 16:50:08 node0 kernel: [  352.546351] DEBUG 644:new_mini_send:117: dst_ptr->p_usr.p_nodeid=0
Aug 18 16:50:08 node0 kernel: [  352.546352] DEBUG 644:new_mini_send:121: RLOCK_DC dc=0 count=0
Aug 18 16:50:08 node0 kernel: [  352.546354] DEBUG 644:new_mini_send:125: RUNLOCK_DC dc=0 count=0
Aug 18 16:50:08 node0 kernel: [  352.546356] DEBUG 644:new_mini_send:140: dcid=0 caller_pid=644 caller_nr=1 dst_ep=10 
Aug 18 16:50:08 node0 kernel: [  352.546357] DEBUG 644:new_mini_send:238: destination is not waiting dst_flags=C. Enqueue at the TAIL.
Aug 18 16:50:08 node0 kernel: [  352.546359] DEBUG 644:sleep_proc2:731: BEFORE DOWN lpid=644 p_sem=0 timeout=30000
Aug 18 16:50:08 node0 kernel: [  352.546360] DEBUG 644:sleep_proc2:733: endpoint=1 flags=4
Aug 18 16:50:08 node0 kernel: [  352.546361] DEBUG 644:sleep_proc2:737: WUNLOCK_PROC ep=1 count=4
Aug 18 16:50:08 node0 kernel: [  352.546363] DEBUG 644:sleep_proc2:737: WUNLOCK_PROC ep=10 count=5
Aug 18 16:50:08 node0 kernel: [  352.546364] DEBUG 644:sleep_proc2:738: endpoint=1 flags=4		

SE MODIFICARON LOS sleep_proc() 
	Se ejecuto ./rhostfsd rhostfs.cfg  para que quede en un dvk_receive() esperando
	y se le hizo kill -SIGUSR1 <PID>
	
[  197.331425] DEBUG 954:sleep_proc:379: sig[0]:0x00000100, sig[1]:0x00000000
[  197.331430] DEBUG 954:sleep_proc:382: endpoint=1 ret=-512 p_rcode=0
[  197.331432] DEBUG 954:sleep_proc:383: endpoint=1 flags=8 cpuid=2
[  197.331434] DEBUG 954:sleep_proc:384: WLOCK_PROC ep=1 count=0
[  197.331436] DEBUG 954:sleep_proc:408: pid=954 ret=-4
[  197.331438] DEBUG 954:sleep_proc:433: nr=1 endp=1 dcid=0 lpid=954 p_cpumask=FFFFFFFF nodemap=1 name=rhostfsd 
[  197.331440] DEBUG 954:sleep_proc:435: someone wakeups me: sem=0 p_rcode=-4
[  197.331442] DEBUG 954:new_mini_receive:503: WUNLOCK_PROC ep=1 count=0
[  197.331443] ERROR: 954:new_mini_receive:504: rcode=-4
[  197.331450] do_exit: local_nodeid:0

ERROR: 
	Deberia haber detectado el SIGUSR1 
	if( sigismember(&current->pending.signal, SIGUSR1)	)
		DVKDEBUG(INTERNAL,"SIGUSR1 received\n");
	Los numeros de SIGNALS ESTAN EN /arch/x86/include/uapi/asm/signal.h

tambien inclui el bind tipo UNIKERNEL_BIND que cambia el flag p_misc_flags
		root@node0:~# cat /proc/dvs/DC0/procs 
		DC pnr -endp -lpid/vpid- nd flag misc -getf -sndt -wmig -prxy name
		 0  11    11  1789/2      0    0  420 27342 27342 27342 27342 test_ukbind   <<< 0x0420 = 0000 0100 0010 0000
		donde 
			MIS_BIT_UNIKERNEL	10
			MIS_BIT_GRPLEADER	5

SOLUCION: Ahora se arreglo lo del SIGUSR1
			if( sigismember(&current->pending.signal,  SIGUSR1) ||				<<< EN ESTA SOLA NO DETECTABA
				sigismember(&current->signal->shared_pending.signal, SIGUSR1)) <<< ESTA IMPRIMIENDO POR ESTA
				DVKDEBUG(INTERNAL,"SIGUSR1 received\n")
		
		root@node0:/usr/src/dvs/vos/uml/rhostfsd# cat /proc/dvs/DC0/procs 
		DC pnr -endp -lpid/vpid- nd flag misc -getf -sndt -wmig -prxy name
		 0   1     1   730/730    0    8   20 31438 27342 27342 27342 rhostfsd       
		root@node0:/usr/src/dvs/vos/uml/rhostfsd# dmesg -c > /dev/null
		root@node0:/usr/src/dvs/vos/uml/rhostfsd# kill -SIGUSR1 730
		root@node0:/usr/src/dvs/vos/uml/rhostfsd# cat /proc/dvs/DC0/procs 
		DC pnr -endp -lpid/vpid- nd flag misc -getf -sndt -wmig -prxy name
		[1]+  SeÃ±al definida por el usuario 1        ./rhostfsd rhostfs.cfg
		root@node0:/usr/src/dvs/vos/uml/rhostfsd# dmesg | grep SIGUSR 
		[ 1464.205878] DEBUG 730:sleep_proc:382: SIGUSR1 received

TODO: REMOVER LO DEL SIGUSR1  Y LUEGO PROBAR QUE PASA CON UML 

ESTE ES EL PRIMERO QUE APARECIO 
Aug 24 23:53:11 node0 kernel: [  197.280044] DEBUG 683:sleep_proc2:799: shared_pending sig[0]:0x00002000, sig[1]:0x00000000
SIGNAL 14 = #define SIGALRM		14		

Aug 24 23:53:11 node0 kernel: [  197.706772] DEBUG 659:sleep_proc2:796: pending: sig[0]:0x00000100, sig[1]:0x00000000
SIGNAL 9 = #define SIGKILL		 9		

Aug 24 23:53:11 node0 kernel: [  197.275254] DEBUG 683:sleep_proc2:799: shared_pending sig[0]:0x10000000, sig[1]:0x00000000
SIGNAL 29 = #define SIGIO		29

Aug 24 23:53:11 node0 kernel: [  197.706776] DEBUG 659:sleep_proc2:799: shared_pending sig[0]:0x00000002, sig[1]:0x00000000
SIGNAL 2 = #define SIGINT		 2		 		

Aug 24 23:53:07 node0 kernel: [  193.690104] DEBUG 683:sleep_proc2:799: shared_pending sig[0]:0x10002000, sig[1]:0x00000000
SIGNAL 29 = #define SIGIO		29
SIGNAL 14 = #define SIGALRM		14		

Aug 24 23:53:00 node0 kernel: [  186.290151] ERROR: 683:new_mini_sendrec:806: rcode=-4

DESCRIPCION DEL PROBLEMA:
========================

		SERVER					CLIENT
1		recvrqst()		
2								sendrec() => p_rts_flags=0x08 (RECEIVING)
3		process_rqst()			
4								SIGALARM
5								Sale con p_rts_flags=0
6								UML_reitera
7								sendrec() => Server no esta esperando => p_rts_flags=0x0C
8		reply()   encuentra a CLIENT en estado erroneo. (deberia estar en 0x08)
		SE PUDRE TODO!!!!!!!!!!!!!!!!!!!!!!!!!!!
		
POSIBLE SOLUCION 
	DVKDEBUG(INTERNAL,"pending: sig[0]:0x%08x, sig[1]:0x%08x\n", 
		current->pending.signal.sig[0], current->pending.signal.sig[1]);
	DVKDEBUG(INTERNAL,"shared_pending sig[0]:0x%08x, sig[1]:0x%08x\n",
		current->signal->shared_pending.signal.sig[0], 
		current->signal->shared_pending.signal.sig[1]);	
	if(test_bit(MIS_BIT_UNIKERNEL, &proc->p_usr.p_misc_flags)){
		if( sigismember(&current->pending.signal,  SIGALRM	) ||
			sigismember(&current->signal->shared_pending.signal, SIGALRM	)){
			DVKDEBUG(INTERNAL,"SIGALRM	 received\n");
			continue;
		}
	}
EL PROBLEMA SIGUE ESTANDO AUN CUANDO SE SUPRIMA LA SIGALRM 
	Aug 25 14:49:51 node0 kernel: [  262.825712] DEBUG 681:sleep_proc:354: timeout=-1
	Aug 25 14:49:51 node0 kernel: [  262.825713] DEBUG 681:sleep_proc:365: BEFORE DOWN lpid=681 p_sem=0 timeout=-1
	Aug 25 14:49:51 node0 kernel: [  262.825714] DEBUG 681:sleep_proc:367: endpoint=10 flags=8
	Aug 25 14:49:51 node0 kernel: [  262.825716] DEBUG 681:sleep_proc:371: WUNLOCK_PROC ep=10 count=9
	Aug 25 14:49:51 node0 kernel: [  262.825717] DEBUG 681:sleep_proc:379: pending: sig[0]:0x00000000, sig[1]:0x00000000
	Aug 25 14:49:51 node0 kernel: [  262.825719] DEBUG 681:sleep_proc:382: shared_pending sig[0]:0x00002000, sig[1]:0x00000000
	Aug 25 14:49:51 node0 kernel: [  262.825720] DEBUG 681:sleep_proc:386: SIGALRM	 received
	Aug 25 14:49:51 node0 kernel: [  262.825721] DEBUG 681:sleep_proc:371: WUNLOCK_PROC ep=10 count=10
	Aug 25 14:49:51 node0 kernel: [  262.825722] DEBUG 681:sleep_proc:379: pending: sig[0]:0x00000000, sig[1]:0x00000000
	Aug 25 14:49:51 node0 kernel: [  262.825723] DEBUG 681:sleep_proc:382: shared_pending sig[0]:0x00000000, sig[1]:0x00000000
	Aug 25 14:49:51 node0 kernel: [  262.825725] DEBUG 681:sleep_proc:397: endpoint=10 ret=-512 p_rcode=0
	Aug 25 14:49:51 node0 kernel: [  262.825726] DEBUG 681:sleep_proc:398: endpoint=10 flags=8 cpuid=1
	Aug 25 14:49:51 node0 kernel: [  262.825727] DEBUG 681:sleep_proc:399: WLOCK_PROC ep=10 count=10
	Aug 25 14:49:51 node0 kernel: [  262.825729] DEBUG 681:sleep_proc:423: pid=681 ret=-4

===============================================================================================================
20200825:
		DA ERROR EL UNBIND 
		[ 1455.424182] DEBUG 746:new_exit_unbind:266: code=-1015034154
		[ 1455.424183] DEBUG 746:new_exit_unbind:270: WLOCK_TASK pid=746 count=0
		[ 1455.424185] DEBUG 746:new_exit_unbind:276: RLOCK_PROC ep=10 count=4125
		[ 1455.424188] DEBUG 746:new_exit_unbind:277: nr=10 endp=10 dcid=0 flags=0 misc=420 lpid=746 vpid=2 nodeid=0 name=uml.linux 
		[ 1455.424190] DEBUG 746:new_exit_unbind:310:  Exiting endpoint=10 lpid=746
		[ 1455.424192] DEBUG 746:new_exit_unbind:312: RUNLOCK_PROC ep=10 count=4125
		[ 1455.424194] DEBUG 746:new_exit_unbind:313: WLOCK_DC dc=0 count=0
		[ 1455.424195] DEBUG 746:new_exit_unbind:314: WLOCK_PROC ep=10 count=4125
		[ 1455.424197] DEBUG 746:new_exit_unbind:321:  endpoint=10 lpid=746
		[ 1455.424200] DEBUG 746:do_unbind:731: nr=10 endp=10 dcid=0 flags=0 misc=420 lpid=746 vpid=2 nodeid=0 name=uml.linux 
		[ 1455.424203] DEBUG 746:do_unbind:760: Caller nr=10 endp=10 dcid=0 flags=0 misc=420 lpid=746 vpid=2 nodeid=0 name=uml.linux 
		[ 1455.424204] DEBUG 746:do_unbind:799: wakeup with error those processes trying to send a message to the proc
		[ 1455.424206] DEBUG 746:do_unbind:805: WUNLOCK_PROC ep=10 count=4125
		[ 1455.424207] DEBUG 746:do_unbind:806: WLOCK_PROC ep=1 count=352
		[ 1455.424209] DEBUG 746:do_unbind:807: WLOCK_PROC ep=10 count=4125
		[ 1455.424210] DEBUG 746:do_unbind:810: LIST_DEL
		[ 1455.424211] DEBUG 746:do_unbind:813: Find process 1 trying to send a message to 10
		[ 1455.424212] DEBUG 746:do_unbind:817: Wakeup SENDER with error ep=1  pid=-1
		[ 1455.424215] DEBUG 746:inherit_cpu:298: cpuid=2 vpid=-1
		[ 1455.424217] ERROR: 746:inherit_cpu:302: rcode=-3
		[ 1455.424220] DEBUG 746:inherit_cpu:306: nr=1 endp=1 dcid=0 lpid=-1 p_cpumask=FFFFFFFF nodemap=0 name=$noname 
		[ 1455.424221] DEBUG 746:do_unbind:818: BEFORE UP lpid=-1 p_sem=0 rcode=-109
		[ 1455.424223] DEBUG 746:do_unbind:823: WUNLOCK_PROC ep=1 count=352
		[ 1455.424224] DEBUG 746:do_unbind:805: WUNLOCK_PROC ep=10 count=4125
		[ 1455.424225] DEBUG 746:do_unbind:806: WLOCK_PROC ep=1 count=352
		[ 1455.424226] DEBUG 746:do_unbind:807: WLOCK_PROC ep=10 count=4125
		[ 1455.424227] DEBUG 746:do_unbind:810: LIST_DEL
		[ 1455.424229] ------------[ cut here ]------------
		[ 1455.424238] WARNING: CPU: 2 PID: 746 at lib/list_debug.c:53 __list_del_entry+0x60/0x100
		[ 1455.424240] list_del corruption, e78e46b4->next is LIST_POISON1 (00000100)
		[ 1455.424241] Modules linked in: iptable_filter fuse vmwgfx snd_ens1371 snd_ac97_codec ac97_bus gameport snd_rawmidi snd_seq_device snd_pcm snd_timer snd joydev ttm drm_kms_helper vmw_balloon serio_raw pcspkr evdev drm sg soundcore shpchp vmw_vmci ac button ip_tables x_tables autofs4 overlay ext4 crc16 jbd2 fscrypto mbcache btrfs xor raid6_pq sr_mod cdrom sd_mod ata_generic hid_generic usbhid hid uhci_hcd ehci_pci ehci_hcd ata_piix libata xhci_pci psmouse xhci_hcd usbcore pcnet32 mii mptspi scsi_transport_spi mptscsih mptbase scsi_mod i2c_piix4
		[ 1455.424299] CPU: 2 PID: 746 Comm: uml.linux Tainted: G        W       4.9.88 #83
		[ 1455.424300] Hardware name: VMware, Inc. VMware Virtual Platform/440BX Desktop Reference Platform, BIOS 6.00 07/29/2019
		[ 1455.424302]  e8e4be10 c332e222 e8e4be24 00000000 c3067a3a c382dd50 e8e4be44 000002ea
		[ 1455.424307]  c382d634 00000035 c334cf40 00000035 00000009 c334cf40 e78e46b4 e78e47d8
		[ 1455.424312]  0000004c e8e4be30 c3067aa6 00000009 00000000 e8e4be24 c382dd50 e8e4be44
		[ 1455.424316] Call Trace:
		[ 1455.424323]  [<c332e222>] ? dump_stack+0x55/0x73
		[ 1455.424328]  [<c3067a3a>] ? __warn+0xea/0x110
		[ 1455.424330]  [<c334cf40>] ? __list_del_entry+0x60/0x100
		[ 1455.424332]  [<c334cf40>] ? __list_del_entry+0x60/0x100
		[ 1455.424335]  [<c3067aa6>] ? warn_slowpath_fmt+0x46/0x60
		[ 1455.424337]  [<c334cf40>] ? __list_del_entry+0x60/0x100
		[ 1455.424339]  [<c334cfe8>] ? list_del+0x8/0x20
		[ 1455.424343]  [<c32693ed>] ? do_unbind+0x1dd/0x20c0
		[ 1455.424414]  [<c30c32f7>] ? vprintk_default+0x37/0x40
		[ 1455.424419]  [<c326d505>] ? new_exit_unbind+0x395/0x1210
		[ 1455.424421]  [<c306c5f2>] ? do_exit+0xa42/0xa50
		[ 1455.424424]  [<c306c677>] ? do_group_exit+0x37/0x90
		[ 1455.424426]  [<c306c6e6>] ? SyS_exit_group+0x16/0x20
		[ 1455.424428]  [<c3003728>] ? do_fast_syscall_32+0x98/0x160
		[ 1455.424432]  [<c363e282>] ? sysenter_past_esp+0x47/0x75
		[ 1455.424434] ---[ end trace 99bb2494cf383978 ]---
		[ 1455.424436] DEBUG 746:do_unbind:813: Find process 1 trying to send a message to 10
		[ 1455.424438] DEBUG 746:do_unbind:817: Wakeup SENDER with error ep=1  pid=-1
		
	
Aug 24 23:52:40 node0 kernel: [  165.990199] list_del corruption, e79058b4->next is LIST_POISON1 (00000100)
	
ERROR: 	El funcionamiento del dvk_rcvrqst es erroneo frente al dvk_receive!!
				BUSCAR DIFF
		POR LAS DUDAS comprobar dvk_reply() vs dvk_send()

	CLIENT->sendrec()
			DEBUG CLIENT:SYSC_ipc:165: ipc_mini_sendrec: call=1280 first=1 second=0 third=0 fifth=-1 
			DEBUG CLIENT:ipc_mini_sendrec:115: srcdst_ep=1 timeout_ms=-1
			DEBUG CLIENT:new_mini_sendrec:523: srcdst_ep=1
			DEBUG CLIENT:check_caller:609: caller_pid=CLIENT caller_tgid=CLIENT
			DEBUG CLIENT:check_caller:645: WLOCK_PROC ep=10 count=702
			DEBUG CLIENT:check_caller:675: WUNLOCK_PROC ep=10 count=702
			DEBUG CLIENT:check_caller:678: dcid=0
			DEBUG CLIENT:check_caller:682: RLOCK_DC dc=0 count=0
			DEBUG CLIENT:check_caller:686: RUNLOCK_DC dc=0 count=0
			DEBUG CLIENT:check_caller:692: caller_pid=CLIENT 
			DEBUG CLIENT:new_mini_sendrec:534: RLOCK_PROC ep=10 count=702
			DEBUG CLIENT:new_mini_sendrec:539: caller_nr=10 caller_ep=10 srcdst_ep=1 
			DEBUG CLIENT:new_mini_sendrec:546: RUNLOCK_PROC ep=10 count=702
			DEBUG CLIENT:new_mini_sendrec:548: dcid=0
			DEBUG CLIENT:new_mini_sendrec:552: RLOCK_DC dc=0 count=0
			DEBUG CLIENT:new_mini_sendrec:556: RUNLOCK_DC dc=0 count=0
			DEBUG CLIENT:new_mini_sendrec:571: RLOCK_PROC ep=10 count=702
			DEBUG CLIENT:new_mini_sendrec:578: RUNLOCK_PROC ep=10 count=702
			DEBUG CLIENT:new_mini_sendrec:584: WUNLOCK_PROC ep=10 count=703
			DEBUG CLIENT:new_mini_sendrec:584: WLOCK_PROC ep=1 count=702
			DEBUG CLIENT:new_mini_sendrec:584: WLOCK_PROC ep=10 count=703
			DEBUG CLIENT:new_mini_sendrec:586: srcdst_nr=1 srcdst_ep=1
			DEBUG CLIENT:new_mini_sendrec:606: srcdst_ptr->p_usr.p_nodeid=0
			DEBUG CLIENT:new_mini_sendrec:610: RLOCK_DC dc=0 count=0
			DEBUG CLIENT:new_mini_sendrec:614: RUNLOCK_DC dc=0 count=0
			DEBUG CLIENT:new_mini_sendrec:629: dcid=0 caller_pid=CLIENT caller_nr=10 srcdst_ep=1 
			DEBUG CLIENT:new_mini_sendrec:634: SENDING HALF
			DEBUG CLIENT:new_mini_sendrec:718: destination is waiting. Copy the message and wakeup destination
			DEBUG CLIENT:copy_usr2usr:1021: rqtr_ep=10 src_ep=10 src_lpid=CLIENT src_vpid=2 src_addr=48c91c58
			DEBUG CLIENT:copy_usr2usr:1024: dst_ep=1 dst_lpid=SERVER dst_vpid=SERVER dst_addr=004bf200 bytes=76
			DEBUG CLIENT:copy_usr2usr:1028: task_pid_nr(current)=CLIENT
			DEBUG CLIENT:copy_usr2usr:1031: WRITE
			DEBUG CLIENT:copy_usr2usr:1036: task_pid_nr(dst_ptr->p_task)=SERVER
			DEBUG CLIENT:dvk_vm_rw:451: pid=SERVER liovcnt=1 riovcnt=1 flags=0 vm_write=1
			DEBUG CLIENT:dvk_check_iovect:1283: type=1 nr_segs=1
			DEBUG CLIENT:dvk_rw_check_kvector:865: type=1 nr_segs=1
			DEBUG CLIENT:dvk_rw_check_kvector:865: type=-1 nr_segs=1
			DEBUG CLIENT:dvk_vm_rw_core:286: pid=SERVER riovcnt=1 flags=0 vm_write=1
			DEBUG CLIENT:dvk_vm_rw_core:340: i=0 rc=0
			DEBUG CLIENT:dvk_vm_rw_core:358: rc=76
			DEBUG CLIENT:dvk_vm_rw_core:365: rc=76
			DEBUG CLIENT:copy_usr2usr:1090: len=76
			DEBUG CLIENT:inherit_cpu:298: cpuid=2 vpid=SERVER
			ERROR: CLIENT:inherit_cpu:302: rcode=-3
			DEBUG CLIENT:inherit_cpu:306: nr=1 endp=1 dcid=0 lpid=SERVER p_cpumask=FFFFFFFF nodemap=1 name=rhostfsd 
			DEBUG CLIENT:new_mini_sendrec:724: BEFORE UP lpid=SERVER p_sem=-1 rcode=76
					Se supone que todavia NO HIZO el 
					WUNLOCK_PROC(srcdst_ptr);
			
		SERVER rcvrqst()	
			DEBUG SERVER:sleep_proc:389: pending: sig[0]:0x00000000, sig[1]:0x00000000
			DEBUG SERVER:sleep_proc:392: shared_pending sig[0]:0x00000000, sig[1]:0x00000000
			DEBUG SERVER:sleep_proc:398: endpoint=1 ret=0 p_rcode=76
			DEBUG SERVER:sleep_proc:399: endpoint=1 flags=0 cpuid=3
			DEBUG SERVER:sleep_proc:400: WLOCK_PROC ep=1 count=701 
			<<<<<<<<<<<<<< PORQUE PUDO HACER ESTO SI SE SUPONE QUE ESTA BLOQUEADO AUN!! 
			DEBUG SERVER:sleep_proc:453: nr=1 endp=1 dcid=0 lpid=SERVER p_cpumask=FFFFFFFF nodemap=1 name=rhostfsd 
			DEBUG SERVER:sleep_proc:455: someone wakeups me: sem=0 p_rcode=0
			DEBUG SERVER:new_mini_rcvrqst:1771: WUNLOCK_PROC ep=1 count=701
			
		SERVER vcopy()	- FALLA el estado de CLIENT no es correcto 
			DEBUG SERVER:SYSC_ipc:165: ipc_vcopy: call=3328 first=10 second=1115267072 third=1 fifth=4096 
			DEBUG SERVER:ipc_vcopy:259: src_ep=10 dst_ep=1 bytes=4096
			DEBUG SERVER:new_vcopy:1124: src_ep=10 dst_ep=1 bytes=4096
			DEBUG SERVER:check_caller:609: caller_pid=SERVER caller_tgid=SERVER
			DEBUG SERVER:check_caller:645: WLOCK_PROC ep=1 count=701
			DEBUG SERVER:check_caller:675: WUNLOCK_PROC ep=1 count=701
			DEBUG SERVER:check_caller:678: dcid=0
			DEBUG SERVER:check_caller:682: RLOCK_DC dc=0 count=0
			DEBUG SERVER:check_caller:686: RUNLOCK_DC dc=0 count=0
			DEBUG SERVER:check_caller:692: caller_pid=SERVER 
			DEBUG SERVER:new_vcopy:1138: RLOCK_PROC ep=1 count=701
			DEBUG SERVER:new_vcopy:1159: dcid=0
			DEBUG SERVER:new_vcopy:1169: RUNLOCK_PROC ep=1 count=701
			DEBUG SERVER:new_vcopy:1171: RLOCK_DC dc=0 count=0
			DEBUG SERVER:new_vcopy:1194: RUNLOCK_DC dc=0 count=0
			DEBUG SERVER:new_vcopy:1197: RLOCK_PROC ep=1 count=701
			DEBUG SERVER:new_vcopy:1216: (src_nr+dc_max_nr_tasks)=44
			DEBUG SERVER:new_vcopy:1222: RUNLOCK_PROC ep=1 count=701
			DEBUG SERVER:new_vcopy:1227: RLOCK_DC dc=0 count=0
			DEBUG SERVER:new_vcopy:1228: LOCK PROCESSES IN ASCENDENT ORDER
			DEBUG SERVER:new_vcopy:1235: WLOCK_PROC ep=1 count=701
			DEBUG SERVER:new_vcopy:1235: WLOCK_PROC ep=10 count=702
			DEBUG SERVER:new_vcopy:1239: CHECK FOR SOURCE/DESTINATION STATUS
			DEBUG SERVER:new_vcopy:1322: RUNLOCK_DC dc=0 count=0
			DEBUG SERVER:new_vcopy:1331: WUNLOCK_PROC ep=1 count=701
			DEBUG SERVER:new_vcopy:1331: WUNLOCK_PROC ep=10 count=702
			ERROR: SERVER:new_vcopy:1334: rcode=-324
			
		SE PUDRE TODO 	
			DEBUG SERVER:SYSC_ipc:165: ipc_mini_reply: call=1792 first=10 second=0 third=0 fifth=30000 
			DEBUG SERVER:ipc_mini_reply:152: dst_ep=10 timeout_ms=30000
			DEBUG SERVER:new_mini_reply:1793: dst_ep=10
			DEBUG SERVER:check_caller:609: caller_pid=SERVER caller_tgid=SERVER
			DEBUG SERVER:check_caller:645: WLOCK_PROC ep=1 count=701
			DEBUG SERVER:check_caller:675: WUNLOCK_PROC ep=1 count=701
			DEBUG SERVER:check_caller:678: dcid=0
			DEBUG SERVER:check_caller:682: RLOCK_DC dc=0 count=0
			DEBUG SERVER:check_caller:686: RUNLOCK_DC dc=0 count=0
			DEBUG SERVER:check_caller:692: caller_pid=SERVER 
			DEBUG SERVER:new_mini_reply:1803: RLOCK_PROC ep=1 count=701
			DEBUG SERVER:new_mini_reply:1807: caller_nr=1 caller_ep=1 dst_ep=10 
			DEBUG SERVER:new_mini_reply:1814: RUNLOCK_PROC ep=1 count=701
			DEBUG SERVER:new_mini_reply:1816: dcid=0
			DEBUG SERVER:new_mini_reply:1820: RLOCK_DC dc=0 count=0
			DEBUG SERVER:new_mini_reply:1825: RUNLOCK_DC dc=0 count=0
			DEBUG SERVER:new_mini_reply:1845: RLOCK_PROC ep=1 count=701
			DEBUG SERVER:new_mini_reply:1852: RUNLOCK_PROC ep=1 count=701
			DEBUG SERVER:new_mini_reply:1855: WLOCK_PROC ep=10 count=702
			DEBUG SERVER:new_mini_reply:1860: dst_nr=10 dst_ep=10
			DEBUG SERVER:new_mini_reply:1879: dst_ptr->p_usr.p_nodeid=0
			DEBUG SERVER:new_mini_reply:1883: RLOCK_DC dc=0 count=0
			DEBUG SERVER:new_mini_reply:1887: RUNLOCK_DC dc=0 count=0
			DEBUG SERVER:new_mini_reply:1902: dcid=0 caller_pid=SERVER caller_nr=1 dst_ep=10 
			DEBUG SERVER:new_mini_reply:1996: destination is not waiting dst_flags=0. Enqueue at the TAIL.
			DEBUG SERVER:new_mini_reply:2002: WUNLOCK_PROC ep=10 count=702
			DEBUG SERVER:new_mini_reply:2004: WUNLOCK_PROC ep=1 count=702
			ERROR: SERVER:new_mini_reply:2005: rcode=-324
			DEBUG CLIENT:new_mini_sendrec:732: WUNLOCK_PROC ep=1 count=703
			DEBUG CLIENT:sleep_proc:355: timeout=-1
			DEBUG CLIENT:sleep_proc:366: BEFORE DOWN lpid=CLIENT p_sem=0 timeout=-1
			DEBUG CLIENT:sleep_proc:368: endpoint=10 flags=8
			DEBUG CLIENT:sleep_proc:375: new_set.sig[0]=0x10002000 old_set.sig[0]=0x00001000
			DEBUG CLIENT:sleep_proc:381: WUNLOCK_PROC ep=10 count=703

TAMBIEN PASA CON dvk_receive() O EL PROBLEMA ESTARA EN dvk_sendrec() ?????????????
		CLIENT dvk_sendrec() 
			Aug 26 19:41:57 node0 kernel: [32724.226140] DEBUG CLIENT:new_mini_sendrec:805: WUNLOCK_PROC ep=10 count=1646
			Aug 26 19:41:57 node0 kernel: [32724.226391] DEBUG CLIENT:SYSC_ipc:165: ipc_mini_sendrec: call=1280 first=1 second=0 third=0 fifth=-1 
			Aug 26 19:41:57 node0 kernel: [32724.226393] DEBUG CLIENT:ipc_mini_sendrec:115: srcdst_ep=1 timeout_ms=-1
			Aug 26 19:41:57 node0 kernel: [32724.226395] DEBUG CLIENT:new_mini_sendrec:523: srcdst_ep=1
			Aug 26 19:41:57 node0 kernel: [32724.226397] DEBUG CLIENT:check_caller:609: caller_pid=CLIENT caller_tgid=CLIENT
			Aug 26 19:41:57 node0 kernel: [32724.226399] DEBUG CLIENT:check_caller:645: WLOCK_PROC ep=10 count=1646
			Aug 26 19:41:57 node0 kernel: [32724.226400] DEBUG CLIENT:check_caller:675: WUNLOCK_PROC ep=10 count=1646
			Aug 26 19:41:57 node0 kernel: [32724.226401] DEBUG CLIENT:check_caller:678: dcid=0
			Aug 26 19:41:57 node0 kernel: [32724.226403] DEBUG CLIENT:check_caller:682: RLOCK_DC dc=0 count=0
			Aug 26 19:41:57 node0 kernel: [32724.226404] DEBUG CLIENT:check_caller:686: RUNLOCK_DC dc=0 count=0
			Aug 26 19:41:57 node0 kernel: [32724.226405] DEBUG CLIENT:check_caller:692: caller_pid=CLIENT 
			Aug 26 19:41:57 node0 kernel: [32724.226407] DEBUG CLIENT:new_mini_sendrec:534: RLOCK_PROC ep=10 count=1646
			Aug 26 19:41:57 node0 kernel: [32724.226408] DEBUG CLIENT:new_mini_sendrec:539: caller_nr=10 caller_ep=10 srcdst_ep=1 
			Aug 26 19:41:57 node0 kernel: [32724.226410] DEBUG CLIENT:new_mini_sendrec:546: RUNLOCK_PROC ep=10 count=1646
			Aug 26 19:41:57 node0 kernel: [32724.226411] DEBUG CLIENT:new_mini_sendrec:548: dcid=0
			Aug 26 19:41:57 node0 kernel: [32724.226412] DEBUG CLIENT:new_mini_sendrec:552: RLOCK_DC dc=0 count=0
			Aug 26 19:41:57 node0 kernel: [32724.226414] DEBUG CLIENT:new_mini_sendrec:556: RUNLOCK_DC dc=0 count=0
			Aug 26 19:41:57 node0 kernel: [32724.226415] DEBUG CLIENT:new_mini_sendrec:571: RLOCK_PROC ep=10 count=1646
			Aug 26 19:41:57 node0 kernel: [32724.226417] DEBUG CLIENT:new_mini_sendrec:578: RUNLOCK_PROC ep=10 count=1646
			Aug 26 19:41:57 node0 kernel: [32724.226418] DEBUG CLIENT:new_mini_sendrec:584: WUNLOCK_PROC ep=10 count=1647
			Aug 26 19:41:57 node0 kernel: [32724.226420] DEBUG CLIENT:new_mini_sendrec:584: WLOCK_PROC ep=1 count=1510
			Aug 26 19:41:57 node0 kernel: [32724.226421] DEBUG CLIENT:new_mini_sendrec:584: WLOCK_PROC ep=10 count=1647
			Aug 26 19:41:57 node0 kernel: [32724.226422] DEBUG CLIENT:new_mini_sendrec:586: srcdst_nr=1 srcdst_ep=1
			Aug 26 19:41:57 node0 kernel: [32724.226424] DEBUG CLIENT:new_mini_sendrec:606: srcdst_ptr->p_usr.p_nodeid=0
			Aug 26 19:41:57 node0 kernel: [32724.226425] DEBUG CLIENT:new_mini_sendrec:610: RLOCK_DC dc=0 count=0
			Aug 26 19:41:57 node0 kernel: [32724.226426] DEBUG CLIENT:new_mini_sendrec:614: RUNLOCK_DC dc=0 count=0
			Aug 26 19:41:57 node0 kernel: [32724.226428] DEBUG CLIENT:new_mini_sendrec:629: dcid=0 caller_pid=CLIENT caller_nr=10 srcdst_ep=1 
			Aug 26 19:41:57 node0 kernel: [32724.226429] DEBUG CLIENT:new_mini_sendrec:634: SENDING HALF
			Aug 26 19:41:57 node0 kernel: [32724.226430] DEBUG CLIENT:new_mini_sendrec:718: destination is waiting. Copy the message and wakeup destination
			Aug 26 19:41:57 node0 kernel: [32724.226433] DEBUG CLIENT:copy_usr2usr:1021: rqtr_ep=10 src_ep=10 src_lpid=CLIENT src_vpid=440 src_addr=47eb9c58
			Aug 26 19:41:57 node0 kernel: [32724.226435] DEBUG CLIENT:copy_usr2usr:1024: dst_ep=1 dst_lpid=SERVER dst_vpid=SERVER dst_addr=00428200 bytes=76
			Aug 26 19:41:57 node0 kernel: [32724.226436] DEBUG CLIENT:copy_usr2usr:1028: task_pid_nr(current)=CLIENT
			Aug 26 19:41:57 node0 kernel: [32724.226437] DEBUG CLIENT:copy_usr2usr:1031: WRITE
			Aug 26 19:41:57 node0 kernel: [32724.226439] DEBUG CLIENT:copy_usr2usr:1036: task_pid_nr(dst_ptr->p_task)=SERVER
			Aug 26 19:41:57 node0 kernel: [32724.226441] DEBUG CLIENT:dvk_vm_rw:451: pid=SERVER liovcnt=1 riovcnt=1 flags=0 vm_write=1
			Aug 26 19:41:57 node0 kernel: [32724.226443] DEBUG CLIENT:dvk_check_iovect:1283: type=1 nr_segs=1
			Aug 26 19:41:57 node0 kernel: [32724.226445] DEBUG CLIENT:dvk_rw_check_kvector:865: type=1 nr_segs=1
			Aug 26 19:41:57 node0 kernel: [32724.226447] DEBUG CLIENT:dvk_rw_check_kvector:865: type=-1 nr_segs=1
			Aug 26 19:41:57 node0 kernel: [32724.226448] DEBUG CLIENT:dvk_vm_rw_core:286: pid=SERVER riovcnt=1 flags=0 vm_write=1
			Aug 26 19:41:57 node0 kernel: [32724.226455] DEBUG CLIENT:dvk_vm_rw_core:340: i=0 rc=0
			Aug 26 19:41:57 node0 kernel: [32724.226467] DEBUG CLIENT:dvk_vm_rw_core:358: rc=76
			Aug 26 19:41:57 node0 kernel: [32724.226468] DEBUG CLIENT:dvk_vm_rw_core:365: rc=76
			Aug 26 19:41:57 node0 kernel: [32724.226469] DEBUG CLIENT:copy_usr2usr:1090: len=76
			Aug 26 19:41:57 node0 kernel: [32724.226471] DEBUG CLIENT:inherit_cpu:298: cpuid=2 vpid=SERVER
			Aug 26 19:41:57 node0 kernel: [32724.226473] ERROR: CLIENT:inherit_cpu:302: rcode=-3
			Aug 26 19:41:57 node0 kernel: [32724.226475] DEBUG CLIENT:inherit_cpu:306: nr=1 endp=1 dcid=0 lpid=SERVER p_cpumask=FFFFFFFF nodemap=1 name=rhostfsd 
			Aug 26 19:41:57 node0 kernel: [32724.226477] DEBUG CLIENT:new_mini_sendrec:724: BEFORE UP lpid=SERVER p_sem=-1 rcode=76
		DESPERTO AL SERVER PERO TODAVIA NO LO LIBERO!!

		SERVER despierta del dvk_receive()
			Aug 26 19:41:57 node0 kernel: [32724.229355] DEBUG SERVER:sleep_proc:389: pending: sig[0]:0x00000000, sig[1]:0x00000000
			Aug 26 19:41:57 node0 kernel: [32724.229360] DEBUG SERVER:sleep_proc:392: shared_pending sig[0]:0x00000000, sig[1]:0x00000000
			Aug 26 19:41:57 node0 kernel: [32724.229361] DEBUG SERVER:sleep_proc:398: endpoint=1 ret=0 p_rcode=76
			Aug 26 19:41:57 node0 kernel: [32724.229363] DEBUG SERVER:sleep_proc:399: endpoint=1 flags=0 cpuid=0
			
		PORQUE PUEDE HACER EL LOCK !!!!!!????????	QUE CARAJO ES count????
			Aug 26 19:41:57 node0 kernel: [32724.229365] DEBUG SERVER:sleep_proc:400: WLOCK_PROC ep=1 count=1509
			Aug 26 19:41:57 node0 kernel: [32724.229368] DEBUG SERVER:sleep_proc:453: nr=1 endp=1 dcid=0 lpid=SERVER p_cpumask=FFFFFFFF nodemap=1 name=rhostfsd 
			Aug 26 19:41:57 node0 kernel: [32724.229370] DEBUG SERVER:sleep_proc:455: someone wakeups me: sem=0 p_rcode=0
			Aug 26 19:41:57 node0 kernel: [32724.229372] DEBUG SERVER:new_mini_receive:503: WUNLOCK_PROC ep=1 count=1509
			
			Aug 26 19:41:57 node0 kernel: [32724.229455] DEBUG SERVER:SYSC_ipc:165: ipc_vcopy: call=3328 first=10 second=1166204928 third=1 fifth=4096 
			Aug 26 19:41:57 node0 kernel: [32724.229457] DEBUG SERVER:ipc_vcopy:259: src_ep=10 dst_ep=1 bytes=4096
			Aug 26 19:41:57 node0 kernel: [32724.229459] DEBUG SERVER:new_vcopy:1124: src_ep=10 dst_ep=1 bytes=4096
			Aug 26 19:41:57 node0 kernel: [32724.229463] DEBUG SERVER:check_caller:609: caller_pid=SERVER caller_tgid=SERVER
			Aug 26 19:41:57 node0 kernel: [32724.229464] DEBUG SERVER:check_caller:645: WLOCK_PROC ep=1 count=1509
			Aug 26 19:41:57 node0 kernel: [32724.229466] DEBUG SERVER:check_caller:675: WUNLOCK_PROC ep=1 count=1509
			Aug 26 19:41:57 node0 kernel: [32724.229467] DEBUG SERVER:check_caller:678: dcid=0
			Aug 26 19:41:57 node0 kernel: [32724.229469] DEBUG SERVER:check_caller:682: RLOCK_DC dc=0 count=0
			Aug 26 19:41:57 node0 kernel: [32724.229470] DEBUG SERVER:check_caller:686: RUNLOCK_DC dc=0 count=0
			Aug 26 19:41:57 node0 kernel: [32724.229471] DEBUG SERVER:check_caller:692: caller_pid=SERVER 
			Aug 26 19:41:57 node0 kernel: [32724.229473] DEBUG SERVER:new_vcopy:1138: RLOCK_PROC ep=1 count=1509
			Aug 26 19:41:57 node0 kernel: [32724.229474] DEBUG SERVER:new_vcopy:1159: dcid=0
			Aug 26 19:41:57 node0 kernel: [32724.229475] DEBUG SERVER:new_vcopy:1169: RUNLOCK_PROC ep=1 count=1509
			Aug 26 19:41:57 node0 kernel: [32724.229477] DEBUG SERVER:new_vcopy:1171: RLOCK_DC dc=0 count=0
			Aug 26 19:41:57 node0 kernel: [32724.229478] DEBUG SERVER:new_vcopy:1194: RUNLOCK_DC dc=0 count=0
			Aug 26 19:41:57 node0 kernel: [32724.229480] DEBUG SERVER:new_vcopy:1197: RLOCK_PROC ep=1 count=1509
			Aug 26 19:41:57 node0 kernel: [32724.229481] DEBUG SERVER:new_vcopy:1216: (src_nr+dc_max_nr_tasks)=44
			Aug 26 19:41:57 node0 kernel: [32724.229482] DEBUG SERVER:new_vcopy:1222: RUNLOCK_PROC ep=1 count=1509
			Aug 26 19:41:57 node0 kernel: [32724.229484] DEBUG SERVER:new_vcopy:1227: RLOCK_DC dc=0 count=0
			Aug 26 19:41:57 node0 kernel: [32724.229486] DEBUG SERVER:new_vcopy:1228: LOCK PROCESSES IN ASCENDENT ORDER
			Aug 26 19:41:57 node0 kernel: [32724.229487] DEBUG SERVER:new_vcopy:1235: WLOCK_PROC ep=1 count=1509
			Aug 26 19:41:57 node0 kernel: [32724.229489] DEBUG SERVER:new_vcopy:1235: WLOCK_PROC ep=10 count=1646
			Aug 26 19:41:57 node0 kernel: [32724.229490] DEBUG SERVER:new_vcopy:1239: CHECK FOR SOURCE/DESTINATION STATUS
			Aug 26 19:41:57 node0 kernel: [32724.229494] DEBUG SERVER:new_vcopy:1322: RUNLOCK_DC dc=0 count=0
			Aug 26 19:41:57 node0 kernel: [32724.229495] DEBUG SERVER:new_vcopy:1331: WUNLOCK_PROC ep=1 count=1509
			Aug 26 19:41:57 node0 kernel: [32724.229496] DEBUG SERVER:new_vcopy:1331: WUNLOCK_PROC ep=10 count=1646
			Aug 26 19:41:57 node0 kernel: [32724.229498] ERROR: SERVER:new_vcopy:1334: rcode=-324

				
				
		ESTE ES EL FUNCIONAMIENTO CUANDO ANDA BIEN 
		CLIENT dvk_sendrec()
			Aug 26 19:41:57 node0 kernel: [32724.221359] DEBUG CLIENT:SYSC_ipc:165: ipc_mini_sendrec: call=1280 first=1 second=0 third=0 fifth=-1 
			Aug 26 19:41:57 node0 kernel: [32724.221363] DEBUG CLIENT:ipc_mini_sendrec:115: srcdst_ep=1 timeout_ms=-1
			Aug 26 19:41:57 node0 kernel: [32724.221366] DEBUG CLIENT:new_mini_sendrec:523: srcdst_ep=1
			Aug 26 19:41:57 node0 kernel: [32724.221370] DEBUG CLIENT:check_caller:609: caller_pid=CLIENT caller_tgid=CLIENT
			Aug 26 19:41:57 node0 kernel: [32724.221372] DEBUG CLIENT:check_caller:645: WLOCK_PROC ep=10 count=1645
			Aug 26 19:41:57 node0 kernel: [32724.221373] DEBUG CLIENT:check_caller:675: WUNLOCK_PROC ep=10 count=1645
			Aug 26 19:41:57 node0 kernel: [32724.221375] DEBUG CLIENT:check_caller:678: dcid=0
			Aug 26 19:41:57 node0 kernel: [32724.221377] DEBUG CLIENT:check_caller:682: RLOCK_DC dc=0 count=0
			Aug 26 19:41:57 node0 kernel: [32724.221378] DEBUG CLIENT:check_caller:686: RUNLOCK_DC dc=0 count=0
			Aug 26 19:41:57 node0 kernel: [32724.221379] DEBUG CLIENT:check_caller:692: caller_pid=CLIENT 
			Aug 26 19:41:57 node0 kernel: [32724.221381] DEBUG CLIENT:new_mini_sendrec:534: RLOCK_PROC ep=10 count=1645
			Aug 26 19:41:57 node0 kernel: [32724.221382] DEBUG CLIENT:new_mini_sendrec:539: caller_nr=10 caller_ep=10 srcdst_ep=1 
			Aug 26 19:41:57 node0 kernel: [32724.221384] DEBUG CLIENT:new_mini_sendrec:546: RUNLOCK_PROC ep=10 count=1645
			Aug 26 19:41:57 node0 kernel: [32724.221385] DEBUG CLIENT:new_mini_sendrec:548: dcid=0
			Aug 26 19:41:57 node0 kernel: [32724.221386] DEBUG CLIENT:new_mini_sendrec:552: RLOCK_DC dc=0 count=0
			Aug 26 19:41:57 node0 kernel: [32724.221387] DEBUG CLIENT:new_mini_sendrec:556: RUNLOCK_DC dc=0 count=0
			Aug 26 19:41:57 node0 kernel: [32724.221389] DEBUG CLIENT:new_mini_sendrec:571: RLOCK_PROC ep=10 count=1645
			Aug 26 19:41:57 node0 kernel: [32724.221390] DEBUG CLIENT:new_mini_sendrec:578: RUNLOCK_PROC ep=10 count=1645
			Aug 26 19:41:57 node0 kernel: [32724.221391] DEBUG CLIENT:new_mini_sendrec:584: WUNLOCK_PROC ep=10 count=1646
			Aug 26 19:41:57 node0 kernel: [32724.221393] DEBUG CLIENT:new_mini_sendrec:584: WLOCK_PROC ep=1 count=1509
			Aug 26 19:41:57 node0 kernel: [32724.221394] DEBUG CLIENT:new_mini_sendrec:584: WLOCK_PROC ep=10 count=1646
			Aug 26 19:41:57 node0 kernel: [32724.221396] DEBUG CLIENT:new_mini_sendrec:586: srcdst_nr=1 srcdst_ep=1
			Aug 26 19:41:57 node0 kernel: [32724.221397] DEBUG CLIENT:new_mini_sendrec:606: srcdst_ptr->p_usr.p_nodeid=0
			Aug 26 19:41:57 node0 kernel: [32724.221398] DEBUG CLIENT:new_mini_sendrec:610: RLOCK_DC dc=0 count=0
			Aug 26 19:41:57 node0 kernel: [32724.221400] DEBUG CLIENT:new_mini_sendrec:614: RUNLOCK_DC dc=0 count=0
			Aug 26 19:41:57 node0 kernel: [32724.221401] DEBUG CLIENT:new_mini_sendrec:629: dcid=0 caller_pid=CLIENT caller_nr=10 srcdst_ep=1 
			Aug 26 19:41:57 node0 kernel: [32724.221402] DEBUG CLIENT:new_mini_sendrec:634: SENDING HALF
			Aug 26 19:41:57 node0 kernel: [32724.221404] DEBUG CLIENT:new_mini_sendrec:718: destination is waiting. Copy the message and wakeup destination
			Aug 26 19:41:57 node0 kernel: [32724.221407] DEBUG CLIENT:copy_usr2usr:1021: rqtr_ep=10 src_ep=10 src_lpid=CLIENT src_vpid=440 src_addr=47eb9c58
			Aug 26 19:41:57 node0 kernel: [32724.221409] DEBUG CLIENT:copy_usr2usr:1024: dst_ep=1 dst_lpid=13314 dst_vpid=13314 dst_addr=00428200 bytes=76
			Aug 26 19:41:57 node0 kernel: [32724.221410] DEBUG CLIENT:copy_usr2usr:1028: task_pid_nr(current)=CLIENT
			Aug 26 19:41:57 node0 kernel: [32724.221411] DEBUG CLIENT:copy_usr2usr:1031: WRITE
			Aug 26 19:41:57 node0 kernel: [32724.221413] DEBUG CLIENT:copy_usr2usr:1036: task_pid_nr(dst_ptr->p_task)=13314
			Aug 26 19:41:57 node0 kernel: [32724.221416] DEBUG CLIENT:dvk_vm_rw:451: pid=13314 liovcnt=1 riovcnt=1 flags=0 vm_write=1
			Aug 26 19:41:57 node0 kernel: [32724.221418] DEBUG CLIENT:dvk_check_iovect:1283: type=1 nr_segs=1
			Aug 26 19:41:57 node0 kernel: [32724.221419] DEBUG CLIENT:dvk_rw_check_kvector:865: type=1 nr_segs=1
			Aug 26 19:41:57 node0 kernel: [32724.221422] DEBUG CLIENT:dvk_rw_check_kvector:865: type=-1 nr_segs=1
			Aug 26 19:41:57 node0 kernel: [32724.221424] DEBUG CLIENT:dvk_vm_rw_core:286: pid=13314 riovcnt=1 flags=0 vm_write=1
			Aug 26 19:41:57 node0 kernel: [32724.221430] DEBUG CLIENT:dvk_vm_rw_core:340: i=0 rc=0
			Aug 26 19:41:57 node0 kernel: [32724.221445] DEBUG CLIENT:dvk_vm_rw_core:358: rc=76
			Aug 26 19:41:57 node0 kernel: [32724.221446] DEBUG CLIENT:dvk_vm_rw_core:365: rc=76
			Aug 26 19:41:57 node0 kernel: [32724.221447] DEBUG CLIENT:copy_usr2usr:1090: len=76
			Aug 26 19:41:57 node0 kernel: [32724.221449] DEBUG CLIENT:inherit_cpu:298: cpuid=2 vpid=13314
			Aug 26 19:41:57 node0 kernel: [32724.221451] ERROR: CLIENT:inherit_cpu:302: rcode=-3
			Aug 26 19:41:57 node0 kernel: [32724.221454] DEBUG CLIENT:inherit_cpu:306: nr=1 endp=1 dcid=0 lpid=13314 p_cpumask=FFFFFFFF nodemap=1 name=rhostfsd 
			Aug 26 19:41:57 node0 kernel: [32724.221456] DEBUG CLIENT:new_mini_sendrec:724: BEFORE UP lpid=13314 p_sem=-1 rcode=76
		AQUI LIBERA AL SERVER!!!! ESTA BIEN 
			Aug 26 19:41:57 node0 kernel: [32724.221491] DEBUG CLIENT:new_mini_sendrec:732: WUNLOCK_PROC ep=1 count=1509
			Aug 26 19:41:57 node0 kernel: [32724.221493] DEBUG CLIENT:sleep_proc:355: timeout=-1
			Aug 26 19:41:57 node0 kernel: [32724.221494] DEBUG CLIENT:sleep_proc:366: BEFORE DOWN lpid=CLIENT p_sem=0 timeout=-1
			Aug 26 19:41:57 node0 kernel: [32724.221496] DEBUG CLIENT:sleep_proc:368: endpoint=10 flags=8
			Aug 26 19:41:57 node0 kernel: [32724.221497] DEBUG CLIENT:sleep_proc:375: new_set.sig[0]=0x10002000 old_set.sig[0]=0x00001000
			Aug 26 19:41:57 node0 kernel: [32724.221499] DEBUG CLIENT:sleep_proc:381: WUNLOCK_PROC ep=10 count=1646


	ERROR!! Hay un WUNLOCK_PROC adicional 

	root@node0:/var/log# grep "WLOCK_PROC ep=10" kern.log | wc 
>>>>>  7537   82907  774089
	root@node0:/var/log# grep "WUNLOCK_PROC ep=10" kern.log | wc 
>>>>>  9045   99495  953368

	root@node0:/var/log# grep "WLOCK_PROC ep=1 " kern.log | wc 
>>>>>  10427  114697 1062920
	root@node0:/var/log# grep "WUNLOCK_PROC ep=1 " kern.log | wc 
>>>>   11936  131296 1242511

Aug 26 20:11:04 node0 kernel: [34471.573473] DEBUG 13328:new_mini_sendrec:584: WLOCK_PROC ep=10 count=1942
Aug 26 20:11:15 node0 kernel: [34482.042370] DEBUG 13328:check_caller:645: WLOCK_PROC ep=10 count=1942
Aug 26 20:11:15 node0 kernel: [34482.042393] DEBUG 13328:new_mini_sendrec:584: WLOCK_PROC ep=10 count=1943
Aug 26 20:11:16 node0 kernel: [34483.350879] DEBUG 13328:check_caller:645: WLOCK_PROC ep=10 count=1943
Aug 26 20:11:16 node0 kernel: [34483.350901] DEBUG 13328:new_mini_sendrec:584: WLOCK_PROC ep=10 count=1944
Aug 26 20:11:20 node0 kernel: [34486.897860] DEBUG 13328:check_caller:645: WLOCK_PROC ep=10 count=1944
Aug 26 20:11:20 node0 kernel: [34486.897883] DEBUG 13328:new_mini_sendrec:584: WLOCK_PROC ep=10 count=1945
Aug 26 20:11:20 node0 kernel: [34487.179489] DEBUG 13328:check_caller:645: WLOCK_PROC ep=10 count=1945
Aug 26 20:11:20 node0 kernel: [34487.179512] DEBUG 13328:new_mini_sendrec:584: WLOCK_PROC ep=10 count=1946
Aug 26 20:11:23 node0 kernel: [34489.947227] DEBUG 13328:new_exit_unbind:314: WLOCK_PROC ep=10 count=1946

Aug 26 20:11:04 node0 kernel: [34471.573475] DEBUG 13328:new_mini_sendrec:617: WUNLOCK_PROC ep=10 count=1942
Aug 26 20:11:15 node0 kernel: [34482.042371] DEBUG 13328:check_caller:675: WUNLOCK_PROC ep=10 count=1942
Aug 26 20:11:15 node0 kernel: [34482.042390] DEBUG 13328:new_mini_sendrec:584: WUNLOCK_PROC ep=10 count=1943
Aug 26 20:11:15 node0 kernel: [34482.042395] DEBUG 13328:new_mini_sendrec:617: WUNLOCK_PROC ep=10 count=1943
Aug 26 20:11:16 node0 kernel: [34483.350880] DEBUG 13328:check_caller:675: WUNLOCK_PROC ep=10 count=1943
Aug 26 20:11:16 node0 kernel: [34483.350898] DEBUG 13328:new_mini_sendrec:584: WUNLOCK_PROC ep=10 count=1944
Aug 26 20:11:16 node0 kernel: [34483.350904] DEBUG 13328:new_mini_sendrec:617: WUNLOCK_PROC ep=10 count=1944
Aug 26 20:11:20 node0 kernel: [34486.897862] DEBUG 13328:check_caller:675: WUNLOCK_PROC ep=10 count=1944
Aug 26 20:11:20 node0 kernel: [34486.897880] DEBUG 13328:new_mini_sendrec:584: WUNLOCK_PROC ep=10 count=1945
Aug 26 20:11:20 node0 kernel: [34486.897885] DEBUG 13328:new_mini_sendrec:617: WUNLOCK_PROC ep=10 count=1945
Aug 26 20:11:20 node0 kernel: [34487.179490] DEBUG 13328:check_caller:675: WUNLOCK_PROC ep=10 count=1945
Aug 26 20:11:20 node0 kernel: [34487.179509] DEBUG 13328:new_mini_sendrec:584: WUNLOCK_PROC ep=10 count=1946
Aug 26 20:11:20 node0 kernel: [34487.179514] DEBUG 13328:new_mini_sendrec:617: WUNLOCK_PROC ep=10 count=1946
Aug 26 20:11:23 node0 kernel: [34489.947282] DEBUG 13328:new_exit_unbind:385: WUNLOCK_PROC ep=10 count=1946
		


Aug 26 19:38:49 node0 kernel: [32536.500245] DEBUG 13328:SYSC_ipc:165: ipc_mini_sendrec: call=1280 first=1 second=0 third=0 fifth=-1 

Aug 26 19:38:49 node0 kernel: [32536.500251] DEBUG 13328:check_caller:645: WLOCK_PROC ep=10 count=955
Aug 26 19:38:49 node0 kernel: [32536.500253] DEBUG 13328:check_caller:675: WUNLOCK_PROC ep=10 count=955

Aug 26 19:38:49 node0 kernel: [32536.500259] DEBUG 13328:new_mini_sendrec:534: RLOCK_PROC ep=10 count=955
Aug 26 19:38:49 node0 kernel: [32536.500262] DEBUG 13328:new_mini_sendrec:546: RUNLOCK_PROC ep=10 count=955

AQUI ESTA EL PROBLEMA!!! 
Aug 26 19:38:49 node0 kernel: [32536.500267] DEBUG 13328:new_mini_sendrec:571: RLOCK_PROC ep=10 count=955
Aug 26 19:38:49 node0 kernel: [32536.500268] DEBUG 13328:new_mini_sendrec:578: RUNLOCK_PROC ep=10 count=955
Aug 26 19:38:49 node0 kernel: [32536.500269] DEBUG 13328:new_mini_sendrec:584: WUNLOCK_PROC ep=10 count=956

Aug 26 19:38:49 node0 kernel: [32536.500272] DEBUG 13328:new_mini_sendrec:584: WLOCK_PROC ep=10 count=956
Aug 26 19:38:49 node0 kernel: [32536.500343] DEBUG 13328:sleep_proc:381: WUNLOCK_PROC ep=10 count=956
===============================================================================================================
20200827:
	
SE MODIFICARON VARIOS ARCHIVOS DEL DVK-MOD 
ERRORES IMPORTANTES DE LOCK/UNLOCK 
TODO IPC AFECTADO 

SE  PROBARON LOS IPC BASICOS EN UML 
	
Se modifico test_dvs_init para que se pueda setear que esta en USERSPACE
TODOS LOS PROCESOS LOCALES BINDEADOS EN UN DVS USERSPACE DEBEN SETEARSE CON EL BIT_USERSPACE
	
EN UML 
	name=TEST_CLUSTER
	nodeid=1
	nr_dcs=32
	nr_nodes=32
	max_nr_procs=221
	max_nr_tasks=35
	max_sys_procs=64
	max_copy_buf=65536
	max_copy_len=1048576
	dbglvl=FFFFFF
	version=5
	flags=105 <<<<<<<<<<<<<<<<<<<<<<< USERMODE=KERNEL DE UML 
	sizeof(proc)=488
	sizeof(proc) aligned=512
	sizeof(dc)=152
	sizeof(node)=80

EL HOST
	name=TEST_CLUSTER
	nodeid=0
	nr_dcs=32
	nr_nodes=32
	max_nr_procs=221
	max_nr_tasks=35
	max_sys_procs=64
	max_copy_buf=65536
	max_copy_len=1048576
	dbglvl=FFFFFF
	version=5
	flags=101 <<<<<<<<<<<<<<<<<<<<<<<<< KERNEL DE HOST 
	sizeof(proc)=504
	sizeof(proc) aligned=512
	sizeof(dc)=164
	sizeof(node)=92


	

===============================================================================================================
ULTIMO_LOG
===============================================================================================================

PROBAR EL KERNEL DEL HOST !! HUBO MUCHOS CAMBIOS 

TODO:		Modificicar los tipos de BIND que se usan en dvk_bind_X()

ACTUALMENTE SON:
#define SELF_BIND		0
#define LCL_BIND		1
#define RMT_BIND		2
#define BKUP_BIND		3
#define REPLICA_BIND	4
#define UNIKERNEL_BIND	5		// IDEM LOCAL pero set_bit(p_misc_flags, MIS_BIT_UNIKERNEL)
#define MAX_BIND_TYPE	UNIKERNEL_BIND


		
PROBLEMON:
			El problema es el siguiente. fundamentalmente en UML que seguro le manda un SIGALRM para que hacer
			el scheduling.
			De todos modos tambien es general.
			Si un proceso CLIENT hizo un sendrec() a un SERVER que hizo el receive() y el SERVER esta laburando
			, en la cola de procesos tratando de enviar del SERVER se inserta al proceso CLIENT.
			Si durante ese tiempo el CLIENT recibe un SIGNAL, pone su estado en RUNNING y retorna con -ERESTARTSYS.
			PERO LA LISTA DEL SERVER QUEDO CORRUPTA.
			
			EL CASO DE UML 
			SERVER esta en receive()
			CLIENT hace sendrec(), el SERVER se pone en RUNNING, y el CLIENT se pone RECEIVING
			CLIENTE recibe SIGNAL = -ERESTARTSYS 
			CLIENTE flags = RUNNING 
			y se vuelve a ejecutar sendrec()
			Ahora el SERVER no esta esperando, entonces el CLIENT se pone en la cola de sending del SERVER
			Cuando el server intenta hacer send() ve que el CLIENT no esta esperando el mensaje y se pone en la cola de CLIENT
			
POSIBLE SOLUCION:
			Dependiendo del lugar donde produjo el ERESTARTSYS, se setea un flag BIT_RESTART
			De esa forma, se dejan los flags anteriores en el mismo estado, pero se le agrega el BIT_RESTART.
			Una vez que se han comprobado todos los parametros de ingreso, 
		PROBLEMA: Ante cualquier error hay que salir borrando el BIT_RESTART 
		SOLUCION: Al entrar, luego que se ha chequeado, variable 
				lcl_restart = (BIT_RESTART)?1:0;
				clear_bit(BIT_RESTART)
				y luego seguir manejandose con el valor de lcl_restart;
		PROBLEMA: Que pasa si no vuelve a ejecutar la SYSCALL ??		
				
OTRA POSIBLE SOLUCION:
			Si la salidad del sleep_proc() es ERESTARTSYS entonces ver que signal fue la que lo provoco.
			si es una boludez, entonces ignorarla.
	
ATENCION: After the signal has been handled, the system call will be restarted (from the beginning), 
		and the user-space application need not deal with "interrupted system call" errors. 
		For cases where restarting is not appropriate, a -EINTR return status will cause a (post-signal) 
		return to user space without restarting the system call.	
	

TODO TODO TODO TODO TODO TODOTODO TODO TODOTODO TODO TODOTODO TODO TODOTODO TODO TODOTODO TODO TODOTODO TODO TODOTODO 

ATENCION!! EN dvk_calls.h estan los dvk_calls reales, y en kipc tambien estan definidos pero con los VOID 
Hay muchos programas que utilizan kipc.h !!!

NORMALIZAR TODO!!

TODO TODO TODO TODO TODO TODOTODO TODO TODOTODO TODO TODOTODO TODO TODOTODO TODO TODOTODO TODO TODOTODO TODO TODOTODO 
	
	
TODO:  Probar proxies 

TODO:  Hacer un programa
		- test_proc_info  para ver los procesos
			test_priv_info <DC> <endpoint> 
			
			struct priv_usr {

  dvk_id_t 	priv_id;			/* index of this system structure */
  int		priv_warn;				/* process to warn when the process exit/fork */
  int		priv_level;			/* privilege level		*/

  short 	priv_trap_mask;		/* allowed system call traps */
  ipc_map_t priv_ipc_from;		/* allowed callers to receive from */
  ipc_map_t priv_ipc_to;		/* allowed destination processes */
  dvk_map_t	priv_dvk_allowed;		/* allowed dvk calls */

  dvktimer_t priv_alarm_timer;	/* synchronous alarm timer */ 

};

		- test_priv_info para ver los proxies 
		
		

TODO:   Incluir impresion de PRIVILEGIOS en /proc 
		- De Procesos 
			/proc/dvs/DCO/priv
			
		- De Proxies 
			root@node0:/usr/src/dvs/dvk-tests# cat /proc/dvs/proxies/priv
			ID Type -lpid- id  -warn- lvl ------name----- priv_dvk_allowed
														  3322222222221111111111000000000033222222222211111111110000000000	
			12 send 123456 12  123456 123 123456789012345 1098765432109876543210987654321010987654321098765432109876543210 	      
   	
	
		
		  dvk_id_t 	priv_id;			/* index of this system structure */
  int		priv_warn;				/* process to warn when the process exit/fork */
  int		priv_level;			/* privilege level		*/

  short 	priv_trap_mask;		/* allowed system call traps */
  ipc_map_t priv_ipc_from;		/* allowed callers to receive from */
  ipc_map_t priv_ipc_to;		/* allowed destination processes */
  dvk_map_t	priv_dvk_allowed;		/* allowed dvk calls */
  	
		
TODO:  Probar Kernel con IPC y modulo con IOCTL juntos 

TODO:  Agregar al proceso, DC, DVS un campo de uptime que indique cuando se arranco.
		Agregar un campo de p_clr_time que indica cuando se limpiaron las estadisticas. 
		Tambien se deberia hacer un dvk_clrprocstats() y dvk_clrproxystats()
		tambien se podria hacer mediante el /proc
		Para limpiar las estadisticas.
		
TODO:  Cuando se ejecuta desde un modulo se debe prender el bit MIS_BIT_KTHREAD en p_misc_flags.
		Esto se hizo en el proxy de kernel 
		C:\PAP\UTN\INVESTIGACION\LAB-NTC\PROYECTOS\MOL-IPC\m3-ipc-mod\MoL_Module\ksocket-0.0.2\m3ipc_tcp_proxy
		PROBLEMA CON COPY_KRN_USR y viceversa.	
		ATENCION, hay que contemplar:
			- IPC: AMBOS ENDPOINTS ESTEN EN EL KERNEL
			- IPC: QUE UN ENDPOINT ESTEN EN EL KERNEL Y OTRO EN EL USER 
			- VCOPY: TODAS LAS COMBINACIONES USER-KERNEL PARA SRC-DST-RQTR
	
	POSIBLE SOLUCION: 
		Supongamos que un proceso de USER hace un dvk_receive() 
		queda esperando en modo kernel. 
		El proceso SRC es de KERNEL y con memcpy copia el mensaje al DST 
		y lo despierta, y este antes se fija si el emisor estaba KERNEL
		Si es asi, hace COPY_KRN_USR y luego vuelve.
		Es decir, hay una doble copia.
		
https://spankbang.com/stream/Mzg1MDE5MQ.-RUStj3g9mCzj7HLqgQs5x0y4K8.mp4
https://spankbang.com/stream/MTg4NzcxNw.Cnen9-WNmoPdvwKoVPp024eqPUs.mp4
https://spankbang.com/stream/MjM1MDk0Nw.bsGkMBr4_LoCv2qSktJO7qbCcaQ.mp4
https://spankbang.com/stream/NzIyMjA1Ng.u_EmgiwEWuiD50eUiTEaOzt2cM8.mp4
https://spankbang.com/stream/NTc3NjIwNQ.NtSQyR7Q2kUn23py-twVesZKuYY.mp4
https://spankbang.com/stream/NzIyMjA1MQ.xG3V_xUDxWCB_LKzARN1_MgLtfE.mp4
https://spankbang.com/stream/NjgxOTY0MQ.aabWw-nh1Px2BvvI-V7Uf3tSUA8.mp4
https://spankbang.com/stream/NjgxMDIzOQ.O7TftzUpdTYu_1K7s74jx-GCuk8.mp4
https://spankbang.com/stream/Njk3NzMzOQ._wu98vhc1ECI-alXA7BZvGlXGS8.mp4
https://vdownload-21.sb-cd.com/6/7/6765843-720p.mp4?st=PFlWmcDTodsIjTauKUdVJA&e=1598334060&d=4
https://spankbang.com/stream/NjY2MzQzNA.t-YlUpVJ4ySnsDM9TPD6WAStHt4.mp4
https://spankbang.com/stream/NjY2MzQ3Nw.RTCPvI_b6BJ29vqLfqNHRuiarH8.mp4
https://spankbang.com/stream/NjU4MDkyMA.-IHiriK50GmHjT9Tws4FURLUBaI.mp4

